{
  "contractName": "AgreementLibrary",
  "abi": [],
  "metadata": "{\"compiler\":{\"version\":\"0.8.26+commit.8a97fa7a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[],\"devdoc\":{\"author\":\"Superfluid\",\"details\":\"Helper library for building super agreement\",\"kind\":\"dev\",\"methods\":{},\"title\":\"Agreement Library\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"project:/contracts/agreements/AgreementLibrary.sol\":\"AgreementLibrary\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0x287b55befed2961a7eabd7d7b1b2839cbca8a5b80ef8dcbb25ed3d4c2002c305\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://bd39944e8fc06be6dbe2dd1d8449b5336e23c6a7ba3e8e9ae5ae0f37f35283f5\",\"dweb:/ipfs/QmPV3FGYjVwvKSgAXKUN3r9T9GwniZz83CxBpM7vyj2G53\"]},\"@openzeppelin/contracts/token/ERC20/extensions/IERC20Metadata.sol\":{\"keccak256\":\"0x8de418a5503946cabe331f35fe242d3201a73f67f77aaeb7110acb1f30423aca\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://5a376d3dda2cb70536c0a45c208b29b34ac560c4cb4f513a42079f96ba47d2dd\",\"dweb:/ipfs/QmZQg6gn1sUpM8wHzwNvSnihumUCAhxD119MpXeKp8B9s8\"]},\"@openzeppelin/contracts/token/ERC721/IERC721.sol\":{\"keccak256\":\"0x5bce51e11f7d194b79ea59fe00c9e8de9fa2c5530124960f29a24d4c740a3266\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://7e66dfde185df46104c11bc89d08fa0760737aa59a2b8546a656473d810a8ea4\",\"dweb:/ipfs/QmXvyqtXPaPss2PD7eqPoSao5Szm2n6UMoiG8TZZDjmChR\"]},\"@openzeppelin/contracts/token/ERC721/extensions/IERC721Metadata.sol\":{\"keccak256\":\"0x75b829ff2f26c14355d1cba20e16fe7b29ca58eb5fef665ede48bc0f9c6c74b9\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://a0a107160525724f9e1bbbab031defc2f298296dd9e331f16a6f7130cec32146\",\"dweb:/ipfs/QmemujxSd7gX8A9M8UwmNbz4Ms3U9FG9QfudUgxwvTmPWf\"]},\"@openzeppelin/contracts/token/ERC777/IERC777.sol\":{\"keccak256\":\"0x79e6094047e40d49efa3c725b7a1519e16c28c46944884b5f6d0fbe89b450f03\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://2570d04d0b74df414fa33f9f7da6442419a07909ece7baeecd7147d9c7d6a432\",\"dweb:/ipfs/QmRDQM1kzddwCk8ateQgnogu495fWb4L9Xwr42DAQhHzi5\"]},\"@openzeppelin/contracts/utils/introspection/IERC165.sol\":{\"keccak256\":\"0x447a5f3ddc18419d41ff92b3773fb86471b1db25773e07f877f548918a185bf1\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://be161e54f24e5c6fae81a12db1a8ae87bc5ae1b0ddc805d82a1440a68455088f\",\"dweb:/ipfs/QmP7C3CHdY9urF4dEMb9wmsp1wMxHF6nhA2yQE5SKiPAdy\"]},\"@openzeppelin/contracts/utils/math/SafeCast.sol\":{\"keccak256\":\"0x52a8cfb0f5239d11b457dcdd1b326992ef672714ca8da71a157255bddd13f3ad\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://495145362c7ff1c9ca88c58bbbbcb412e3c2004406647412394486552ff6c278\",\"dweb:/ipfs/QmNNCeng6d5eRPDn6tkWSQhjE39XWfQEfjA63rRwHmr1iH\"]},\"project:/contracts/agreements/AgreementLibrary.sol\":{\"keccak256\":\"0x417cafe855e502d9c9781c74b7e9716c7d3251dcca7a9c26356c44d4d99f7c7d\",\"license\":\"AGPLv3\",\"urls\":[\"bzz-raw://476a823577d31483a475d7c118f0cd53214eee353806b7f1845ea01119008915\",\"dweb:/ipfs/Qma5epSak43UWvHWZosYkGdXzvJw8nZt7ciSuqEbeGnFZM\"]},\"project:/contracts/interfaces/agreements/IConstantFlowAgreementV1.sol\":{\"keccak256\":\"0x26f6828c29d0a4f58d9427dabcb0ad6c0ab2e3e8b2ce97bf25846cff740a8968\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://8df911f06289aa9d6f6357546a70085906696932ff0dc3a4858fc0dcb1761590\",\"dweb:/ipfs/QmNkkyVSWpLGizWgUVhVUf9yyw4QWqsrGRnuQz2VNBU4yq\"]},\"project:/contracts/interfaces/agreements/IInstantDistributionAgreementV1.sol\":{\"keccak256\":\"0xac0ea75673feea931d1129ffff440390a0dd3a8f8cfa60fdb1481342652dc348\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://a08777cd6701548c08f1f55d0ce86e0773a80ef28613852cd2f0552a2a24a387\",\"dweb:/ipfs/QmTgWcQE6mNs3MLUCgqtnsC5UfYYQ9x3gsjXpvJdSe2WJg\"]},\"project:/contracts/interfaces/agreements/gdav1/IGeneralDistributionAgreementV1.sol\":{\"keccak256\":\"0x2453b6e031f02e22acbec1d70746e2294b27dd19138b925c0e638ab70a73f4dc\",\"license\":\"AGPLv3\",\"urls\":[\"bzz-raw://86d4cf488d99f75563192185a476569be505ba5eadc2b4f0d57b749d469c4ec9\",\"dweb:/ipfs/QmYJ1JLQi5K6HjtW24xDj5mTTAbhPTW9Z24qiZR76P5oFc\"]},\"project:/contracts/interfaces/agreements/gdav1/IPoolAdminNFT.sol\":{\"keccak256\":\"0x114cbccfd652231eb5454ab9c4cfe0d3a7427943dee0cce72d88160f12ed8505\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://0837cc47bcd635ab470e336e9448fc1160531220aa8a1d55cea39bbee43af6ab\",\"dweb:/ipfs/QmbpaZcVmSsCeoE3j494TmbWzFriKgUR4TsTK5BwjvxRCw\"]},\"project:/contracts/interfaces/agreements/gdav1/IPoolMemberNFT.sol\":{\"keccak256\":\"0x5a52452b00db96398759f1a2017ed8d76390730cb16a0d3e143b1fc7c5b99bed\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://9f3a7c1f327fde03f63058d196f48472f69c0314e77214c6d3661f4b1b85ff99\",\"dweb:/ipfs/Qmf8mJJnPqDPqmDKiofqEhrDFwo9d4zWt5NsToqSH5F6mL\"]},\"project:/contracts/interfaces/agreements/gdav1/IPoolNFTBase.sol\":{\"keccak256\":\"0x1e5604256c5dd52f969b46feea0d708bde11c1a481bf7c50e33c67fd5dbf4262\",\"license\":\"AGPLv3\",\"urls\":[\"bzz-raw://6c7c6c57094abc70ef32b2844b9df403e2c0ca7cee57a90f87038f2f071f7683\",\"dweb:/ipfs/QmSfBSuh3LWKJ3CcfPkVVnxy4uUsaXhgFMU1X7CA5Ym7wS\"]},\"project:/contracts/interfaces/agreements/gdav1/ISuperfluidPool.sol\":{\"keccak256\":\"0xba35457f17700196958d60627fdff2eeb3aba1e39188e2bbc695ca6d18cc7c62\",\"license\":\"AGPLv3\",\"urls\":[\"bzz-raw://13c5974b4817df9c7ac34f2b74da74340e22005ee027483cfabef109325f30af\",\"dweb:/ipfs/QmSGb4LUCEjsT3UNeMNQWoSDUSGeRgk6neNpm8zELFqpSr\"]},\"project:/contracts/interfaces/superfluid/Definitions.sol\":{\"keccak256\":\"0xb0d023a924c5400696c6763e8cde65bcf30f33ed951ed3cf84cf8411b7259079\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://0508f5153b25d9a2367335d89f06e841f584654d8ceb6c34c8244d85f195bc01\",\"dweb:/ipfs/QmfDY4NZqDxoBEwEMd2GQBF4dvND17gfK3xhZYs5VZF9Fc\"]},\"project:/contracts/interfaces/superfluid/ISuperAgreement.sol\":{\"keccak256\":\"0xba0407c47917aee8b6e7cea745332d2f7244cc3b91d249426f0105b365feb0ee\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://4e8c38994af84e123476f8de8b81fe466e9a575374b13c38a4dc30bdd2d12c06\",\"dweb:/ipfs/QmfHrSyeMQN7wVn7qmD6aPH1wX4ugkhQXiR8te6xhADGaK\"]},\"project:/contracts/interfaces/superfluid/ISuperApp.sol\":{\"keccak256\":\"0x9a1cbf6d6037aac2381e8e66a2ad89e9afe6f89b290c21cb587ff6b06d137ee2\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://dc53d92d863ef2eb577b59d3c4310dc170590df95d7b7455044ce3a05329a826\",\"dweb:/ipfs/QmbEuVbV83R73w3o4CgsALUWVUitodjTUKVydK8cXSRCBk\"]},\"project:/contracts/interfaces/superfluid/ISuperToken.sol\":{\"keccak256\":\"0xc3252f64a9abebccb24a8ce23961a9a2b8ccfca54dc8737cbe26c3426ddffd15\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://3fcedca6e4e7cd6482589c9c49a104943c7bfa308056a450185a95b234f26194\",\"dweb:/ipfs/QmVTaiBXbfHYk4ivpTjbqyA76byz8SXwLAcowZ6uJETzJB\"]},\"project:/contracts/interfaces/superfluid/ISuperTokenFactory.sol\":{\"keccak256\":\"0x85b2cae18114b9253080a6f237eb10b5bd47b696ea4ac6f2c6fde17ab09758e3\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://0c1324d63067436949c181c27b9fff9f29b4ec4ae142d57a6a8b6eeee481c548\",\"dweb:/ipfs/QmVBdQZEa6icdz4wabr3LDD7BifebmjnvtBDZTGSy2EMds\"]},\"project:/contracts/interfaces/superfluid/ISuperfluid.sol\":{\"keccak256\":\"0x002f2a2e6d730acb43b345e0ac0d4c2428d3dc2818a07e5bbae95efc438ff416\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://904119b60c85de02a77cc518bcc212acec182d30ef9d64024f682d787b0d8497\",\"dweb:/ipfs/QmTy39PU5AsFMw1AAYt3PD7iwtxtiTmbxDMcis6GFAVb9B\"]},\"project:/contracts/interfaces/superfluid/ISuperfluidGovernance.sol\":{\"keccak256\":\"0x345e483e26ba79b19bce42b00e3b89f6ffdf11ba851f552e9c15b3eda1a993f1\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://efde589a0280f1388b6e47f4cdb4406292a28bae54881e624858726621eccec4\",\"dweb:/ipfs/QmaRrsRqCauvVLBZavcAURNXrFNP1WxNKGkdQehFavRsG6\"]},\"project:/contracts/interfaces/superfluid/ISuperfluidToken.sol\":{\"keccak256\":\"0x18ea972421ff57ce62103f90c820ee039f170f0189a4b3c73fd0ff09452d1dbf\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://dd24799269920b4b7925362b41650b5b968bb957dc0dec50b451f5382fe573c1\",\"dweb:/ipfs/QmbL19zzZZSbVu2gYA3FtJLu4kbCtk9BybxCU7oJfpUbE7\"]},\"project:/contracts/interfaces/tokens/ISETH.sol\":{\"keccak256\":\"0x9857ab20198ca28d75afcf2f6843a23a1052bf2199a308392f8e2d8a63914cbc\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://8321dcd14869cfb65ed07c2de950f04cf79c1d0392cb2b820f0e76e2b344d1bb\",\"dweb:/ipfs/QmRbDDTwGUkpNnSNgiugGU7r4jJLTkgAFqQfRyd3zkEBXT\"]}},\"version\":1}",
  "bytecode": "0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122008ecf6e3950bb84f39601b35ed3736dc6c5a8f82a534615e7ad3a73987bfa78564736f6c634300081a0033",
  "deployedBytecode": "0x73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122008ecf6e3950bb84f39601b35ed3736dc6c5a8f82a534615e7ad3a73987bfa78564736f6c634300081a0033",
  "immutableReferences": {},
  "generatedSources": [],
  "deployedGeneratedSources": [],
  "sourceMap": "470:8203:46:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;470:8203:46;;;;;;;;;;;;;;;;;",
  "deployedSourceMap": "470:8203:46:-:0;;;;;;;;",
  "source": "// SPDX-License-Identifier: AGPLv3\npragma solidity ^0.8.23;\n\nimport {\n    ISuperfluid,\n    ISuperfluidToken,\n    ISuperApp,\n    SuperAppDefinitions\n} from \"../interfaces/superfluid/ISuperfluid.sol\";\nimport { ISuperfluidToken } from \"../interfaces/superfluid/ISuperfluidToken.sol\";\n\nimport { SafeCast } from \"@openzeppelin/contracts/utils/math/SafeCast.sol\";\n\n\n/**\n * @title Agreement Library\n * @author Superfluid\n * @dev Helper library for building super agreement\n */\nlibrary AgreementLibrary {\n\n    using SafeCast for uint256;\n    using SafeCast for int256;\n\n    /**************************************************************************\n     * Context helpers\n     *************************************************************************/\n\n    /**\n     * @dev Authorize the msg.sender to access token agreement storage\n     *\n     * NOTE:\n     * - msg.sender must be the expected host contract.\n     * - it should revert on unauthorized access.\n     */\n    function authorizeTokenAccess(ISuperfluidToken token, bytes memory ctx)\n        internal view\n        returns (ISuperfluid.Context memory)\n    {\n        require(token.getHost() == msg.sender, \"unauthorized host\");\n        require(ISuperfluid(msg.sender).isCtxValid(ctx), \"invalid ctx\");\n        // [SECURITY] NOTE: we are holding the assumption here that the decoded ctx is correct\n        // at this point.\n        return ISuperfluid(msg.sender).decodeCtx(ctx);\n    }\n\n    /**************************************************************************\n     * Agreement callback helpers\n     *************************************************************************/\n\n    struct CallbackInputs {\n        ISuperfluidToken token;\n        address account;\n        bytes32 agreementId;\n        bytes agreementData;\n        uint256 appCreditGranted;\n        int256 appCreditUsed;\n        uint256 noopBit;\n    }\n\n    function createCallbackInputs(\n        ISuperfluidToken token,\n        address account,\n        bytes32 agreementId,\n        bytes memory agreementData\n    )\n       internal pure\n       returns (CallbackInputs memory inputs)\n    {\n        inputs.token = token;\n        inputs.account = account;\n        inputs.agreementId = agreementId;\n        inputs.agreementData = agreementData;\n    }\n\n    function callAppBeforeCallback(\n        CallbackInputs memory inputs,\n        bytes memory ctx\n    )\n        internal\n        returns(bytes memory cbdata)\n    {\n        bool isSuperApp;\n        bool isJailed;\n        uint256 noopMask;\n        (isSuperApp, isJailed, noopMask) = ISuperfluid(msg.sender).getAppManifest(ISuperApp(inputs.account));\n        if (isSuperApp && !isJailed) {\n            bytes memory appCtx = _pushCallbackStack(ctx, inputs);\n            if ((noopMask & inputs.noopBit) == 0) {\n                bytes memory callData = abi.encodeWithSelector(\n                    _selectorFromNoopBit(inputs.noopBit),\n                    inputs.token,\n                    address(this) /* agreementClass */,\n                    inputs.agreementId,\n                    inputs.agreementData,\n                    new bytes(0) // placeholder ctx\n                );\n                cbdata = ISuperfluid(msg.sender).callAppBeforeCallback(\n                    ISuperApp(inputs.account),\n                    callData,\n                    inputs.noopBit == SuperAppDefinitions.BEFORE_AGREEMENT_TERMINATED_NOOP,\n                    appCtx);\n            }\n            // [SECURITY] NOTE: ctx should be const, do not modify it ever to ensure callback stack correctness\n            _popCallbackStack(ctx, 0);\n        }\n    }\n\n    function callAppAfterCallback(\n        CallbackInputs memory inputs,\n        bytes memory cbdata,\n        bytes /* const */ memory ctx\n    )\n        internal\n        returns (ISuperfluid.Context memory appContext, bytes memory newCtx)\n    {\n        bool isSuperApp;\n        bool isJailed;\n        uint256 noopMask;\n        (isSuperApp, isJailed, noopMask) = ISuperfluid(msg.sender).getAppManifest(ISuperApp(inputs.account));\n\n        newCtx = ctx;\n        if (isSuperApp && !isJailed) {\n            newCtx = _pushCallbackStack(newCtx, inputs);\n            if ((noopMask & inputs.noopBit) == 0) {\n                bytes memory callData = abi.encodeWithSelector(\n                    _selectorFromNoopBit(inputs.noopBit),\n                    inputs.token,\n                    address(this) /* agreementClass */,\n                    inputs.agreementId,\n                    inputs.agreementData,\n                    cbdata,\n                    new bytes(0) // placeholder ctx\n                );\n                newCtx = ISuperfluid(msg.sender).callAppAfterCallback(\n                    ISuperApp(inputs.account),\n                    callData,\n                    inputs.noopBit == SuperAppDefinitions.AFTER_AGREEMENT_TERMINATED_NOOP,\n                    newCtx);\n\n                appContext = ISuperfluid(msg.sender).decodeCtx(newCtx);\n\n                // adjust credit used to the range [appCreditUsed..appCreditGranted]\n                appContext.appCreditUsed = _adjustNewAppCreditUsed(\n                    inputs.appCreditGranted,\n                    appContext.appCreditUsed\n                );\n            }\n            // [SECURITY] NOTE: ctx should be const, do not modify it ever to ensure callback stack correctness\n            newCtx = _popCallbackStack(ctx, appContext.appCreditUsed);\n        }\n    }\n\n    /**\n     * @dev Determines how much app credit the app will use.\n     * @param appCreditGranted set prior to callback based on input flow\n     * @param appCallbackDepositDelta set in callback - sum of deposit deltas of callback agreements and\n     * current flow owed deposit amount\n     */\n    function _adjustNewAppCreditUsed(\n        uint256 appCreditGranted,\n        int256 appCallbackDepositDelta\n    ) internal pure returns (int256) {\n        // NOTE: we use max(0, ...) because appCallbackDepositDelta can be negative and appCallbackDepositDelta\n        // should never go below 0, otherwise the SuperApp can return more money than borrowed\n        return max(\n            0,\n\n            // NOTE: we use min(appCreditGranted, appCallbackDepositDelta) to ensure that the SuperApp borrows\n            // appCreditGranted at most and appCallbackDepositDelta at least (if smaller than appCreditGranted)\n            min(\n                appCreditGranted.toInt256(),\n                appCallbackDepositDelta\n            )\n        );\n    }\n\n    function _selectorFromNoopBit(uint256 noopBit)\n        private pure\n        returns (bytes4 selector)\n    {\n        if (noopBit == SuperAppDefinitions.BEFORE_AGREEMENT_CREATED_NOOP) {\n            return ISuperApp.beforeAgreementCreated.selector;\n        } else if (noopBit == SuperAppDefinitions.BEFORE_AGREEMENT_UPDATED_NOOP) {\n            return ISuperApp.beforeAgreementUpdated.selector;\n        } else if (noopBit == SuperAppDefinitions.BEFORE_AGREEMENT_TERMINATED_NOOP) {\n            return ISuperApp.beforeAgreementTerminated.selector;\n        } else if (noopBit == SuperAppDefinitions.AFTER_AGREEMENT_CREATED_NOOP) {\n            return ISuperApp.afterAgreementCreated.selector;\n        } else if (noopBit == SuperAppDefinitions.AFTER_AGREEMENT_UPDATED_NOOP) {\n            return ISuperApp.afterAgreementUpdated.selector;\n        } else /* if (noopBit == SuperAppDefinitions.AFTER_AGREEMENT_TERMINATED_NOOP) */ {\n            return ISuperApp.afterAgreementTerminated.selector;\n        }\n    }\n\n    function _pushCallbackStack(\n        bytes memory ctx,\n        CallbackInputs memory inputs\n    )\n        private\n        returns (bytes memory appCtx)\n    {\n        // app credit params stack PUSH\n        // pass app credit and current credit used to the app,\n        appCtx = ISuperfluid(msg.sender).appCallbackPush(\n            ctx,\n            ISuperApp(inputs.account),\n            inputs.appCreditGranted,\n            inputs.appCreditUsed,\n            inputs.token);\n    }\n\n    function _popCallbackStack(\n        bytes memory ctx,\n        int256 appCreditUsedDelta\n    )\n        private\n        returns (bytes memory newCtx)\n    {\n        // app credit params stack POP\n        return ISuperfluid(msg.sender).appCallbackPop(ctx, appCreditUsedDelta);\n    }\n\n    /**************************************************************************\n     * Misc\n     *************************************************************************/\n\n    function max(int256 a, int256 b) internal pure returns (int256) { return a > b ? a : b; }\n    function max(uint256 a, uint256 b) internal pure returns (uint256) { return a > b ? a : b; }\n\n    function min(int256 a, int256 b) internal pure returns (int256) { return a > b ? b : a; }\n}\n",
  "sourcePath": "/home/runner/work/protocol-monorepo/protocol-monorepo/packages/ethereum-contracts/contracts/agreements/AgreementLibrary.sol",
  "ast": {
    "absolutePath": "project:/contracts/agreements/AgreementLibrary.sol",
    "exportedSymbols": {
      "AgreementLibrary": [
        11813
      ],
      "ISuperApp": [
        37667
      ],
      "ISuperfluid": [
        38940
      ],
      "ISuperfluidToken": [
        39368
      ],
      "SafeCast": [
        7168
      ],
      "SuperAppDefinitions": [
        37190
      ]
    },
    "id": 11814,
    "license": "AGPLv3",
    "nodeType": "SourceUnit",
    "nodes": [
      {
        "id": 11265,
        "literals": [
          "solidity",
          "^",
          "0.8",
          ".23"
        ],
        "nodeType": "PragmaDirective",
        "src": "35:24:46"
      },
      {
        "absolutePath": "project:/contracts/interfaces/superfluid/ISuperfluid.sol",
        "file": "../interfaces/superfluid/ISuperfluid.sol",
        "id": 11270,
        "nameLocation": "-1:-1:-1",
        "nodeType": "ImportDirective",
        "scope": 11814,
        "sourceUnit": 38941,
        "src": "61:137:46",
        "symbolAliases": [
          {
            "foreign": {
              "id": 11266,
              "name": "ISuperfluid",
              "nodeType": "Identifier",
              "overloadedDeclarations": [],
              "referencedDeclaration": 38940,
              "src": "74:11:46",
              "typeDescriptions": {}
            },
            "nameLocation": "-1:-1:-1"
          },
          {
            "foreign": {
              "id": 11267,
              "name": "ISuperfluidToken",
              "nodeType": "Identifier",
              "overloadedDeclarations": [],
              "referencedDeclaration": 39368,
              "src": "91:16:46",
              "typeDescriptions": {}
            },
            "nameLocation": "-1:-1:-1"
          },
          {
            "foreign": {
              "id": 11268,
              "name": "ISuperApp",
              "nodeType": "Identifier",
              "overloadedDeclarations": [],
              "referencedDeclaration": 37667,
              "src": "113:9:46",
              "typeDescriptions": {}
            },
            "nameLocation": "-1:-1:-1"
          },
          {
            "foreign": {
              "id": 11269,
              "name": "SuperAppDefinitions",
              "nodeType": "Identifier",
              "overloadedDeclarations": [],
              "referencedDeclaration": 37190,
              "src": "128:19:46",
              "typeDescriptions": {}
            },
            "nameLocation": "-1:-1:-1"
          }
        ],
        "unitAlias": ""
      },
      {
        "absolutePath": "project:/contracts/interfaces/superfluid/ISuperfluidToken.sol",
        "file": "../interfaces/superfluid/ISuperfluidToken.sol",
        "id": 11272,
        "nameLocation": "-1:-1:-1",
        "nodeType": "ImportDirective",
        "scope": 11814,
        "sourceUnit": 39369,
        "src": "199:81:46",
        "symbolAliases": [
          {
            "foreign": {
              "id": 11271,
              "name": "ISuperfluidToken",
              "nodeType": "Identifier",
              "overloadedDeclarations": [],
              "referencedDeclaration": 39368,
              "src": "208:16:46",
              "typeDescriptions": {}
            },
            "nameLocation": "-1:-1:-1"
          }
        ],
        "unitAlias": ""
      },
      {
        "absolutePath": "@openzeppelin/contracts/utils/math/SafeCast.sol",
        "file": "@openzeppelin/contracts/utils/math/SafeCast.sol",
        "id": 11274,
        "nameLocation": "-1:-1:-1",
        "nodeType": "ImportDirective",
        "scope": 11814,
        "sourceUnit": 7169,
        "src": "282:75:46",
        "symbolAliases": [
          {
            "foreign": {
              "id": 11273,
              "name": "SafeCast",
              "nodeType": "Identifier",
              "overloadedDeclarations": [],
              "referencedDeclaration": 7168,
              "src": "291:8:46",
              "typeDescriptions": {}
            },
            "nameLocation": "-1:-1:-1"
          }
        ],
        "unitAlias": ""
      },
      {
        "abstract": false,
        "baseContracts": [],
        "canonicalName": "AgreementLibrary",
        "contractDependencies": [],
        "contractKind": "library",
        "documentation": {
          "id": 11275,
          "nodeType": "StructuredDocumentation",
          "src": "360:109:46",
          "text": " @title Agreement Library\n @author Superfluid\n @dev Helper library for building super agreement"
        },
        "fullyImplemented": true,
        "id": 11813,
        "linearizedBaseContracts": [
          11813
        ],
        "name": "AgreementLibrary",
        "nameLocation": "478:16:46",
        "nodeType": "ContractDefinition",
        "nodes": [
          {
            "global": false,
            "id": 11278,
            "libraryName": {
              "id": 11276,
              "name": "SafeCast",
              "nameLocations": [
                "508:8:46"
              ],
              "nodeType": "IdentifierPath",
              "referencedDeclaration": 7168,
              "src": "508:8:46"
            },
            "nodeType": "UsingForDirective",
            "src": "502:27:46",
            "typeName": {
              "id": 11277,
              "name": "uint256",
              "nodeType": "ElementaryTypeName",
              "src": "521:7:46",
              "typeDescriptions": {
                "typeIdentifier": "t_uint256",
                "typeString": "uint256"
              }
            }
          },
          {
            "global": false,
            "id": 11281,
            "libraryName": {
              "id": 11279,
              "name": "SafeCast",
              "nameLocations": [
                "540:8:46"
              ],
              "nodeType": "IdentifierPath",
              "referencedDeclaration": 7168,
              "src": "540:8:46"
            },
            "nodeType": "UsingForDirective",
            "src": "534:26:46",
            "typeName": {
              "id": 11280,
              "name": "int256",
              "nodeType": "ElementaryTypeName",
              "src": "553:6:46",
              "typeDescriptions": {
                "typeIdentifier": "t_int256",
                "typeString": "int256"
              }
            }
          },
          {
            "body": {
              "id": 11322,
              "nodeType": "Block",
              "src": "1106:325:46",
              "statements": [
                {
                  "expression": {
                    "arguments": [
                      {
                        "commonType": {
                          "typeIdentifier": "t_address",
                          "typeString": "address"
                        },
                        "id": 11299,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "leftExpression": {
                          "arguments": [],
                          "expression": {
                            "argumentTypes": [],
                            "expression": {
                              "id": 11294,
                              "name": "token",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 11285,
                              "src": "1124:5:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                                "typeString": "contract ISuperfluidToken"
                              }
                            },
                            "id": 11295,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "memberLocation": "1130:7:46",
                            "memberName": "getHost",
                            "nodeType": "MemberAccess",
                            "referencedDeclaration": 39104,
                            "src": "1124:13:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_function_external_view$__$returns$_t_address_$",
                              "typeString": "function () view external returns (address)"
                            }
                          },
                          "id": 11296,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "functionCall",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "1124:15:46",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_address",
                            "typeString": "address"
                          }
                        },
                        "nodeType": "BinaryOperation",
                        "operator": "==",
                        "rightExpression": {
                          "expression": {
                            "id": 11297,
                            "name": "msg",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": -15,
                            "src": "1143:3:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_magic_message",
                              "typeString": "msg"
                            }
                          },
                          "id": 11298,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "memberLocation": "1147:6:46",
                          "memberName": "sender",
                          "nodeType": "MemberAccess",
                          "src": "1143:10:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_address",
                            "typeString": "address"
                          }
                        },
                        "src": "1124:29:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      {
                        "hexValue": "756e617574686f72697a656420686f7374",
                        "id": 11300,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": true,
                        "kind": "string",
                        "lValueRequested": false,
                        "nodeType": "Literal",
                        "src": "1155:19:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_stringliteral_3f6dc9b293fecb1cf03a6aa9f2232df686d05e2ca49fd03d79912ef4cd344024",
                          "typeString": "literal_string \"unauthorized host\""
                        },
                        "value": "unauthorized host"
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        },
                        {
                          "typeIdentifier": "t_stringliteral_3f6dc9b293fecb1cf03a6aa9f2232df686d05e2ca49fd03d79912ef4cd344024",
                          "typeString": "literal_string \"unauthorized host\""
                        }
                      ],
                      "id": 11293,
                      "name": "require",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [
                        -18,
                        -18,
                        -18
                      ],
                      "referencedDeclaration": -18,
                      "src": "1116:7:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",
                        "typeString": "function (bool,string memory) pure"
                      }
                    },
                    "id": 11301,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1116:59:46",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 11302,
                  "nodeType": "ExpressionStatement",
                  "src": "1116:59:46"
                },
                {
                  "expression": {
                    "arguments": [
                      {
                        "arguments": [
                          {
                            "id": 11309,
                            "name": "ctx",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 11287,
                            "src": "1228:3:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes memory"
                            }
                          }
                        ],
                        "expression": {
                          "argumentTypes": [
                            {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes memory"
                            }
                          ],
                          "expression": {
                            "arguments": [
                              {
                                "expression": {
                                  "id": 11305,
                                  "name": "msg",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": -15,
                                  "src": "1205:3:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_magic_message",
                                    "typeString": "msg"
                                  }
                                },
                                "id": 11306,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "memberLocation": "1209:6:46",
                                "memberName": "sender",
                                "nodeType": "MemberAccess",
                                "src": "1205:10:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_address",
                                  "typeString": "address"
                                }
                              }
                            ],
                            "expression": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_address",
                                  "typeString": "address"
                                }
                              ],
                              "id": 11304,
                              "name": "ISuperfluid",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 38940,
                              "src": "1193:11:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$38940_$",
                                "typeString": "type(contract ISuperfluid)"
                              }
                            },
                            "id": 11307,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "kind": "typeConversion",
                            "lValueRequested": false,
                            "nameLocations": [],
                            "names": [],
                            "nodeType": "FunctionCall",
                            "src": "1193:23:46",
                            "tryCall": false,
                            "typeDescriptions": {
                              "typeIdentifier": "t_contract$_ISuperfluid_$38940",
                              "typeString": "contract ISuperfluid"
                            }
                          },
                          "id": 11308,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "memberLocation": "1217:10:46",
                          "memberName": "isCtxValid",
                          "nodeType": "MemberAccess",
                          "referencedDeclaration": 38915,
                          "src": "1193:34:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_function_external_view$_t_bytes_memory_ptr_$returns$_t_bool_$",
                            "typeString": "function (bytes memory) view external returns (bool)"
                          }
                        },
                        "id": 11310,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "kind": "functionCall",
                        "lValueRequested": false,
                        "nameLocations": [],
                        "names": [],
                        "nodeType": "FunctionCall",
                        "src": "1193:39:46",
                        "tryCall": false,
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      {
                        "hexValue": "696e76616c696420637478",
                        "id": 11311,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": true,
                        "kind": "string",
                        "lValueRequested": false,
                        "nodeType": "Literal",
                        "src": "1234:13:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_stringliteral_8f8f08c62baf4acb9bbfb399b38ee27afacee1adb2672da3752ebc24a02d9298",
                          "typeString": "literal_string \"invalid ctx\""
                        },
                        "value": "invalid ctx"
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        },
                        {
                          "typeIdentifier": "t_stringliteral_8f8f08c62baf4acb9bbfb399b38ee27afacee1adb2672da3752ebc24a02d9298",
                          "typeString": "literal_string \"invalid ctx\""
                        }
                      ],
                      "id": 11303,
                      "name": "require",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [
                        -18,
                        -18,
                        -18
                      ],
                      "referencedDeclaration": -18,
                      "src": "1185:7:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$",
                        "typeString": "function (bool,string memory) pure"
                      }
                    },
                    "id": 11312,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1185:63:46",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 11313,
                  "nodeType": "ExpressionStatement",
                  "src": "1185:63:46"
                },
                {
                  "expression": {
                    "arguments": [
                      {
                        "id": 11319,
                        "name": "ctx",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11287,
                        "src": "1420:3:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bytes_memory_ptr",
                          "typeString": "bytes memory"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_bytes_memory_ptr",
                          "typeString": "bytes memory"
                        }
                      ],
                      "expression": {
                        "arguments": [
                          {
                            "expression": {
                              "id": 11315,
                              "name": "msg",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": -15,
                              "src": "1398:3:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_magic_message",
                                "typeString": "msg"
                              }
                            },
                            "id": 11316,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "memberLocation": "1402:6:46",
                            "memberName": "sender",
                            "nodeType": "MemberAccess",
                            "src": "1398:10:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_address",
                              "typeString": "address"
                            }
                          }
                        ],
                        "expression": {
                          "argumentTypes": [
                            {
                              "typeIdentifier": "t_address",
                              "typeString": "address"
                            }
                          ],
                          "id": 11314,
                          "name": "ISuperfluid",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 38940,
                          "src": "1386:11:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$38940_$",
                            "typeString": "type(contract ISuperfluid)"
                          }
                        },
                        "id": 11317,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "kind": "typeConversion",
                        "lValueRequested": false,
                        "nameLocations": [],
                        "names": [],
                        "nodeType": "FunctionCall",
                        "src": "1386:23:46",
                        "tryCall": false,
                        "typeDescriptions": {
                          "typeIdentifier": "t_contract$_ISuperfluid_$38940",
                          "typeString": "contract ISuperfluid"
                        }
                      },
                      "id": 11318,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "memberLocation": "1410:9:46",
                      "memberName": "decodeCtx",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 38908,
                      "src": "1386:33:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_external_pure$_t_bytes_memory_ptr_$returns$_t_struct$_Context_$38872_memory_ptr_$",
                        "typeString": "function (bytes memory) pure external returns (struct ISuperfluid.Context memory)"
                      }
                    },
                    "id": 11320,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "1386:38:46",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_Context_$38872_memory_ptr",
                      "typeString": "struct ISuperfluid.Context memory"
                    }
                  },
                  "functionReturnParameters": 11292,
                  "id": 11321,
                  "nodeType": "Return",
                  "src": "1379:45:46"
                }
              ]
            },
            "documentation": {
              "id": 11282,
              "nodeType": "StructuredDocumentation",
              "src": "750:208:46",
              "text": " @dev Authorize the msg.sender to access token agreement storage\n NOTE:\n - msg.sender must be the expected host contract.\n - it should revert on unauthorized access."
            },
            "id": 11323,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "authorizeTokenAccess",
            "nameLocation": "972:20:46",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 11288,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11285,
                  "mutability": "mutable",
                  "name": "token",
                  "nameLocation": "1010:5:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11323,
                  "src": "993:22:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                    "typeString": "contract ISuperfluidToken"
                  },
                  "typeName": {
                    "id": 11284,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 11283,
                      "name": "ISuperfluidToken",
                      "nameLocations": [
                        "993:16:46"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 39368,
                      "src": "993:16:46"
                    },
                    "referencedDeclaration": 39368,
                    "src": "993:16:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                      "typeString": "contract ISuperfluidToken"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11287,
                  "mutability": "mutable",
                  "name": "ctx",
                  "nameLocation": "1030:3:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11323,
                  "src": "1017:16:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 11286,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "1017:5:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "992:42:46"
            },
            "returnParameters": {
              "id": 11292,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11291,
                  "mutability": "mutable",
                  "name": "",
                  "nameLocation": "-1:-1:-1",
                  "nodeType": "VariableDeclaration",
                  "scope": 11323,
                  "src": "1074:26:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_struct$_Context_$38872_memory_ptr",
                    "typeString": "struct ISuperfluid.Context"
                  },
                  "typeName": {
                    "id": 11290,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 11289,
                      "name": "ISuperfluid.Context",
                      "nameLocations": [
                        "1074:11:46",
                        "1086:7:46"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 38872,
                      "src": "1074:19:46"
                    },
                    "referencedDeclaration": 38872,
                    "src": "1074:19:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_Context_$38872_storage_ptr",
                      "typeString": "struct ISuperfluid.Context"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "1073:28:46"
            },
            "scope": 11813,
            "src": "963:468:46",
            "stateMutability": "view",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "canonicalName": "AgreementLibrary.CallbackInputs",
            "id": 11339,
            "members": [
              {
                "constant": false,
                "id": 11326,
                "mutability": "mutable",
                "name": "token",
                "nameLocation": "1681:5:46",
                "nodeType": "VariableDeclaration",
                "scope": 11339,
                "src": "1664:22:46",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                  "typeString": "contract ISuperfluidToken"
                },
                "typeName": {
                  "id": 11325,
                  "nodeType": "UserDefinedTypeName",
                  "pathNode": {
                    "id": 11324,
                    "name": "ISuperfluidToken",
                    "nameLocations": [
                      "1664:16:46"
                    ],
                    "nodeType": "IdentifierPath",
                    "referencedDeclaration": 39368,
                    "src": "1664:16:46"
                  },
                  "referencedDeclaration": 39368,
                  "src": "1664:16:46",
                  "typeDescriptions": {
                    "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                    "typeString": "contract ISuperfluidToken"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 11328,
                "mutability": "mutable",
                "name": "account",
                "nameLocation": "1704:7:46",
                "nodeType": "VariableDeclaration",
                "scope": 11339,
                "src": "1696:15:46",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_address",
                  "typeString": "address"
                },
                "typeName": {
                  "id": 11327,
                  "name": "address",
                  "nodeType": "ElementaryTypeName",
                  "src": "1696:7:46",
                  "stateMutability": "nonpayable",
                  "typeDescriptions": {
                    "typeIdentifier": "t_address",
                    "typeString": "address"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 11330,
                "mutability": "mutable",
                "name": "agreementId",
                "nameLocation": "1729:11:46",
                "nodeType": "VariableDeclaration",
                "scope": 11339,
                "src": "1721:19:46",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_bytes32",
                  "typeString": "bytes32"
                },
                "typeName": {
                  "id": 11329,
                  "name": "bytes32",
                  "nodeType": "ElementaryTypeName",
                  "src": "1721:7:46",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes32",
                    "typeString": "bytes32"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 11332,
                "mutability": "mutable",
                "name": "agreementData",
                "nameLocation": "1756:13:46",
                "nodeType": "VariableDeclaration",
                "scope": 11339,
                "src": "1750:19:46",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_bytes_storage_ptr",
                  "typeString": "bytes"
                },
                "typeName": {
                  "id": 11331,
                  "name": "bytes",
                  "nodeType": "ElementaryTypeName",
                  "src": "1750:5:46",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_storage_ptr",
                    "typeString": "bytes"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 11334,
                "mutability": "mutable",
                "name": "appCreditGranted",
                "nameLocation": "1787:16:46",
                "nodeType": "VariableDeclaration",
                "scope": 11339,
                "src": "1779:24:46",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 11333,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "1779:7:46",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 11336,
                "mutability": "mutable",
                "name": "appCreditUsed",
                "nameLocation": "1820:13:46",
                "nodeType": "VariableDeclaration",
                "scope": 11339,
                "src": "1813:20:46",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_int256",
                  "typeString": "int256"
                },
                "typeName": {
                  "id": 11335,
                  "name": "int256",
                  "nodeType": "ElementaryTypeName",
                  "src": "1813:6:46",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  }
                },
                "visibility": "internal"
              },
              {
                "constant": false,
                "id": 11338,
                "mutability": "mutable",
                "name": "noopBit",
                "nameLocation": "1851:7:46",
                "nodeType": "VariableDeclaration",
                "scope": 11339,
                "src": "1843:15:46",
                "stateVariable": false,
                "storageLocation": "default",
                "typeDescriptions": {
                  "typeIdentifier": "t_uint256",
                  "typeString": "uint256"
                },
                "typeName": {
                  "id": 11337,
                  "name": "uint256",
                  "nodeType": "ElementaryTypeName",
                  "src": "1843:7:46",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  }
                },
                "visibility": "internal"
              }
            ],
            "name": "CallbackInputs",
            "nameLocation": "1639:14:46",
            "nodeType": "StructDefinition",
            "scope": 11813,
            "src": "1632:233:46",
            "visibility": "public"
          },
          {
            "body": {
              "id": 11378,
              "nodeType": "Block",
              "src": "2100:159:46",
              "statements": [
                {
                  "expression": {
                    "id": 11358,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "expression": {
                        "id": 11354,
                        "name": "inputs",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11352,
                        "src": "2110:6:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                          "typeString": "struct AgreementLibrary.CallbackInputs memory"
                        }
                      },
                      "id": 11356,
                      "isConstant": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "memberLocation": "2117:5:46",
                      "memberName": "token",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 11326,
                      "src": "2110:12:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                        "typeString": "contract ISuperfluidToken"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "id": 11357,
                      "name": "token",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11342,
                      "src": "2125:5:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                        "typeString": "contract ISuperfluidToken"
                      }
                    },
                    "src": "2110:20:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                      "typeString": "contract ISuperfluidToken"
                    }
                  },
                  "id": 11359,
                  "nodeType": "ExpressionStatement",
                  "src": "2110:20:46"
                },
                {
                  "expression": {
                    "id": 11364,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "expression": {
                        "id": 11360,
                        "name": "inputs",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11352,
                        "src": "2140:6:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                          "typeString": "struct AgreementLibrary.CallbackInputs memory"
                        }
                      },
                      "id": 11362,
                      "isConstant": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "memberLocation": "2147:7:46",
                      "memberName": "account",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 11328,
                      "src": "2140:14:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_address",
                        "typeString": "address"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "id": 11363,
                      "name": "account",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11344,
                      "src": "2157:7:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_address",
                        "typeString": "address"
                      }
                    },
                    "src": "2140:24:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_address",
                      "typeString": "address"
                    }
                  },
                  "id": 11365,
                  "nodeType": "ExpressionStatement",
                  "src": "2140:24:46"
                },
                {
                  "expression": {
                    "id": 11370,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "expression": {
                        "id": 11366,
                        "name": "inputs",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11352,
                        "src": "2174:6:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                          "typeString": "struct AgreementLibrary.CallbackInputs memory"
                        }
                      },
                      "id": 11368,
                      "isConstant": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "memberLocation": "2181:11:46",
                      "memberName": "agreementId",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 11330,
                      "src": "2174:18:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes32",
                        "typeString": "bytes32"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "id": 11369,
                      "name": "agreementId",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11346,
                      "src": "2195:11:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes32",
                        "typeString": "bytes32"
                      }
                    },
                    "src": "2174:32:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes32",
                      "typeString": "bytes32"
                    }
                  },
                  "id": 11371,
                  "nodeType": "ExpressionStatement",
                  "src": "2174:32:46"
                },
                {
                  "expression": {
                    "id": 11376,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "expression": {
                        "id": 11372,
                        "name": "inputs",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11352,
                        "src": "2216:6:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                          "typeString": "struct AgreementLibrary.CallbackInputs memory"
                        }
                      },
                      "id": 11374,
                      "isConstant": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "memberLocation": "2223:13:46",
                      "memberName": "agreementData",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 11332,
                      "src": "2216:20:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes_memory_ptr",
                        "typeString": "bytes memory"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "id": 11375,
                      "name": "agreementData",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11348,
                      "src": "2239:13:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes_memory_ptr",
                        "typeString": "bytes memory"
                      }
                    },
                    "src": "2216:36:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_memory_ptr",
                      "typeString": "bytes memory"
                    }
                  },
                  "id": 11377,
                  "nodeType": "ExpressionStatement",
                  "src": "2216:36:46"
                }
              ]
            },
            "id": 11379,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "createCallbackInputs",
            "nameLocation": "1880:20:46",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 11349,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11342,
                  "mutability": "mutable",
                  "name": "token",
                  "nameLocation": "1927:5:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11379,
                  "src": "1910:22:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                    "typeString": "contract ISuperfluidToken"
                  },
                  "typeName": {
                    "id": 11341,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 11340,
                      "name": "ISuperfluidToken",
                      "nameLocations": [
                        "1910:16:46"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 39368,
                      "src": "1910:16:46"
                    },
                    "referencedDeclaration": 39368,
                    "src": "1910:16:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                      "typeString": "contract ISuperfluidToken"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11344,
                  "mutability": "mutable",
                  "name": "account",
                  "nameLocation": "1950:7:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11379,
                  "src": "1942:15:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_address",
                    "typeString": "address"
                  },
                  "typeName": {
                    "id": 11343,
                    "name": "address",
                    "nodeType": "ElementaryTypeName",
                    "src": "1942:7:46",
                    "stateMutability": "nonpayable",
                    "typeDescriptions": {
                      "typeIdentifier": "t_address",
                      "typeString": "address"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11346,
                  "mutability": "mutable",
                  "name": "agreementId",
                  "nameLocation": "1975:11:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11379,
                  "src": "1967:19:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes32",
                    "typeString": "bytes32"
                  },
                  "typeName": {
                    "id": 11345,
                    "name": "bytes32",
                    "nodeType": "ElementaryTypeName",
                    "src": "1967:7:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes32",
                      "typeString": "bytes32"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11348,
                  "mutability": "mutable",
                  "name": "agreementData",
                  "nameLocation": "2009:13:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11379,
                  "src": "1996:26:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 11347,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "1996:5:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "1900:128:46"
            },
            "returnParameters": {
              "id": 11353,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11352,
                  "mutability": "mutable",
                  "name": "inputs",
                  "nameLocation": "2088:6:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11379,
                  "src": "2066:28:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                    "typeString": "struct AgreementLibrary.CallbackInputs"
                  },
                  "typeName": {
                    "id": 11351,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 11350,
                      "name": "CallbackInputs",
                      "nameLocations": [
                        "2066:14:46"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 11339,
                      "src": "2066:14:46"
                    },
                    "referencedDeclaration": 11339,
                    "src": "2066:14:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_CallbackInputs_$11339_storage_ptr",
                      "typeString": "struct AgreementLibrary.CallbackInputs"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "2065:30:46"
            },
            "scope": 11813,
            "src": "1871:388:46",
            "stateMutability": "pure",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "body": {
              "id": 11485,
              "nodeType": "Block",
              "src": "2424:1159:46",
              "statements": [
                {
                  "assignments": [
                    11390
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 11390,
                      "mutability": "mutable",
                      "name": "isSuperApp",
                      "nameLocation": "2439:10:46",
                      "nodeType": "VariableDeclaration",
                      "scope": 11485,
                      "src": "2434:15:46",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      },
                      "typeName": {
                        "id": 11389,
                        "name": "bool",
                        "nodeType": "ElementaryTypeName",
                        "src": "2434:4:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 11391,
                  "nodeType": "VariableDeclarationStatement",
                  "src": "2434:15:46"
                },
                {
                  "assignments": [
                    11393
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 11393,
                      "mutability": "mutable",
                      "name": "isJailed",
                      "nameLocation": "2464:8:46",
                      "nodeType": "VariableDeclaration",
                      "scope": 11485,
                      "src": "2459:13:46",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      },
                      "typeName": {
                        "id": 11392,
                        "name": "bool",
                        "nodeType": "ElementaryTypeName",
                        "src": "2459:4:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 11394,
                  "nodeType": "VariableDeclarationStatement",
                  "src": "2459:13:46"
                },
                {
                  "assignments": [
                    11396
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 11396,
                      "mutability": "mutable",
                      "name": "noopMask",
                      "nameLocation": "2490:8:46",
                      "nodeType": "VariableDeclaration",
                      "scope": 11485,
                      "src": "2482:16:46",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "typeName": {
                        "id": 11395,
                        "name": "uint256",
                        "nodeType": "ElementaryTypeName",
                        "src": "2482:7:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 11397,
                  "nodeType": "VariableDeclarationStatement",
                  "src": "2482:16:46"
                },
                {
                  "expression": {
                    "id": 11412,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "components": [
                        {
                          "id": 11398,
                          "name": "isSuperApp",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 11390,
                          "src": "2509:10:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        {
                          "id": 11399,
                          "name": "isJailed",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 11393,
                          "src": "2521:8:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        {
                          "id": 11400,
                          "name": "noopMask",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 11396,
                          "src": "2531:8:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        }
                      ],
                      "id": 11401,
                      "isConstant": false,
                      "isInlineArray": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "nodeType": "TupleExpression",
                      "src": "2508:32:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_tuple$_t_bool_$_t_bool_$_t_uint256_$",
                        "typeString": "tuple(bool,bool,uint256)"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "arguments": [
                        {
                          "arguments": [
                            {
                              "expression": {
                                "id": 11408,
                                "name": "inputs",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 11382,
                                "src": "2592:6:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                  "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                }
                              },
                              "id": 11409,
                              "isConstant": false,
                              "isLValue": true,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "2599:7:46",
                              "memberName": "account",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 11328,
                              "src": "2592:14:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            ],
                            "id": 11407,
                            "name": "ISuperApp",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 37667,
                            "src": "2582:9:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_ISuperApp_$37667_$",
                              "typeString": "type(contract ISuperApp)"
                            }
                          },
                          "id": 11410,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "2582:25:46",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperApp_$37667",
                            "typeString": "contract ISuperApp"
                          }
                        }
                      ],
                      "expression": {
                        "argumentTypes": [
                          {
                            "typeIdentifier": "t_contract$_ISuperApp_$37667",
                            "typeString": "contract ISuperApp"
                          }
                        ],
                        "expression": {
                          "arguments": [
                            {
                              "expression": {
                                "id": 11403,
                                "name": "msg",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": -15,
                                "src": "2555:3:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_magic_message",
                                  "typeString": "msg"
                                }
                              },
                              "id": 11404,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "2559:6:46",
                              "memberName": "sender",
                              "nodeType": "MemberAccess",
                              "src": "2555:10:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            ],
                            "id": 11402,
                            "name": "ISuperfluid",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 38940,
                            "src": "2543:11:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$38940_$",
                              "typeString": "type(contract ISuperfluid)"
                            }
                          },
                          "id": 11405,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "2543:23:46",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperfluid_$38940",
                            "typeString": "contract ISuperfluid"
                          }
                        },
                        "id": 11406,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "2567:14:46",
                        "memberName": "getAppManifest",
                        "nodeType": "MemberAccess",
                        "referencedDeclaration": 38706,
                        "src": "2543:38:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_function_external_view$_t_contract$_ISuperApp_$37667_$returns$_t_bool_$_t_bool_$_t_uint256_$",
                          "typeString": "function (contract ISuperApp) view external returns (bool,bool,uint256)"
                        }
                      },
                      "id": 11411,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "kind": "functionCall",
                      "lValueRequested": false,
                      "nameLocations": [],
                      "names": [],
                      "nodeType": "FunctionCall",
                      "src": "2543:65:46",
                      "tryCall": false,
                      "typeDescriptions": {
                        "typeIdentifier": "t_tuple$_t_bool_$_t_bool_$_t_uint256_$",
                        "typeString": "tuple(bool,bool,uint256)"
                      }
                    },
                    "src": "2508:100:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 11413,
                  "nodeType": "ExpressionStatement",
                  "src": "2508:100:46"
                },
                {
                  "condition": {
                    "commonType": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    },
                    "id": 11417,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftExpression": {
                      "id": 11414,
                      "name": "isSuperApp",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11390,
                      "src": "2622:10:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "nodeType": "BinaryOperation",
                    "operator": "&&",
                    "rightExpression": {
                      "id": 11416,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "nodeType": "UnaryOperation",
                      "operator": "!",
                      "prefix": true,
                      "src": "2636:9:46",
                      "subExpression": {
                        "id": 11415,
                        "name": "isJailed",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11393,
                        "src": "2637:8:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "src": "2622:23:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "id": 11484,
                  "nodeType": "IfStatement",
                  "src": "2618:959:46",
                  "trueBody": {
                    "id": 11483,
                    "nodeType": "Block",
                    "src": "2647:930:46",
                    "statements": [
                      {
                        "assignments": [
                          11419
                        ],
                        "declarations": [
                          {
                            "constant": false,
                            "id": 11419,
                            "mutability": "mutable",
                            "name": "appCtx",
                            "nameLocation": "2674:6:46",
                            "nodeType": "VariableDeclaration",
                            "scope": 11483,
                            "src": "2661:19:46",
                            "stateVariable": false,
                            "storageLocation": "memory",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes"
                            },
                            "typeName": {
                              "id": 11418,
                              "name": "bytes",
                              "nodeType": "ElementaryTypeName",
                              "src": "2661:5:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_bytes_storage_ptr",
                                "typeString": "bytes"
                              }
                            },
                            "visibility": "internal"
                          }
                        ],
                        "id": 11424,
                        "initialValue": {
                          "arguments": [
                            {
                              "id": 11421,
                              "name": "ctx",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 11384,
                              "src": "2702:3:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_bytes_memory_ptr",
                                "typeString": "bytes memory"
                              }
                            },
                            {
                              "id": 11422,
                              "name": "inputs",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 11382,
                              "src": "2707:6:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                "typeString": "struct AgreementLibrary.CallbackInputs memory"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_bytes_memory_ptr",
                                "typeString": "bytes memory"
                              },
                              {
                                "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                "typeString": "struct AgreementLibrary.CallbackInputs memory"
                              }
                            ],
                            "id": 11420,
                            "name": "_pushCallbackStack",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 11742,
                            "src": "2683:18:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_function_internal_nonpayable$_t_bytes_memory_ptr_$_t_struct$_CallbackInputs_$11339_memory_ptr_$returns$_t_bytes_memory_ptr_$",
                              "typeString": "function (bytes memory,struct AgreementLibrary.CallbackInputs memory) returns (bytes memory)"
                            }
                          },
                          "id": 11423,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "functionCall",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "2683:31:46",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_bytes_memory_ptr",
                            "typeString": "bytes memory"
                          }
                        },
                        "nodeType": "VariableDeclarationStatement",
                        "src": "2661:53:46"
                      },
                      {
                        "condition": {
                          "commonType": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          "id": 11431,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftExpression": {
                            "components": [
                              {
                                "commonType": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                "id": 11428,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftExpression": {
                                  "id": 11425,
                                  "name": "noopMask",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 11396,
                                  "src": "2733:8:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "nodeType": "BinaryOperation",
                                "operator": "&",
                                "rightExpression": {
                                  "expression": {
                                    "id": 11426,
                                    "name": "inputs",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 11382,
                                    "src": "2744:6:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                      "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                    }
                                  },
                                  "id": 11427,
                                  "isConstant": false,
                                  "isLValue": true,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "memberLocation": "2751:7:46",
                                  "memberName": "noopBit",
                                  "nodeType": "MemberAccess",
                                  "referencedDeclaration": 11338,
                                  "src": "2744:14:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "src": "2733:25:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              }
                            ],
                            "id": 11429,
                            "isConstant": false,
                            "isInlineArray": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "nodeType": "TupleExpression",
                            "src": "2732:27:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "BinaryOperation",
                          "operator": "==",
                          "rightExpression": {
                            "hexValue": "30",
                            "id": 11430,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": true,
                            "kind": "number",
                            "lValueRequested": false,
                            "nodeType": "Literal",
                            "src": "2763:1:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_rational_0_by_1",
                              "typeString": "int_const 0"
                            },
                            "value": "0"
                          },
                          "src": "2732:32:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "id": 11477,
                        "nodeType": "IfStatement",
                        "src": "2728:688:46",
                        "trueBody": {
                          "id": 11476,
                          "nodeType": "Block",
                          "src": "2766:650:46",
                          "statements": [
                            {
                              "assignments": [
                                11433
                              ],
                              "declarations": [
                                {
                                  "constant": false,
                                  "id": 11433,
                                  "mutability": "mutable",
                                  "name": "callData",
                                  "nameLocation": "2797:8:46",
                                  "nodeType": "VariableDeclaration",
                                  "scope": 11476,
                                  "src": "2784:21:46",
                                  "stateVariable": false,
                                  "storageLocation": "memory",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes_memory_ptr",
                                    "typeString": "bytes"
                                  },
                                  "typeName": {
                                    "id": 11432,
                                    "name": "bytes",
                                    "nodeType": "ElementaryTypeName",
                                    "src": "2784:5:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_storage_ptr",
                                      "typeString": "bytes"
                                    }
                                  },
                                  "visibility": "internal"
                                }
                              ],
                              "id": 11455,
                              "initialValue": {
                                "arguments": [
                                  {
                                    "arguments": [
                                      {
                                        "expression": {
                                          "id": 11437,
                                          "name": "inputs",
                                          "nodeType": "Identifier",
                                          "overloadedDeclarations": [],
                                          "referencedDeclaration": 11382,
                                          "src": "2873:6:46",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                            "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                          }
                                        },
                                        "id": 11438,
                                        "isConstant": false,
                                        "isLValue": true,
                                        "isPure": false,
                                        "lValueRequested": false,
                                        "memberLocation": "2880:7:46",
                                        "memberName": "noopBit",
                                        "nodeType": "MemberAccess",
                                        "referencedDeclaration": 11338,
                                        "src": "2873:14:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      }
                                    ],
                                    "expression": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      ],
                                      "id": 11436,
                                      "name": "_selectorFromNoopBit",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 11711,
                                      "src": "2852:20:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_function_internal_pure$_t_uint256_$returns$_t_bytes4_$",
                                        "typeString": "function (uint256) pure returns (bytes4)"
                                      }
                                    },
                                    "id": 11439,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "kind": "functionCall",
                                    "lValueRequested": false,
                                    "nameLocations": [],
                                    "names": [],
                                    "nodeType": "FunctionCall",
                                    "src": "2852:36:46",
                                    "tryCall": false,
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes4",
                                      "typeString": "bytes4"
                                    }
                                  },
                                  {
                                    "expression": {
                                      "id": 11440,
                                      "name": "inputs",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 11382,
                                      "src": "2910:6:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                        "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                      }
                                    },
                                    "id": 11441,
                                    "isConstant": false,
                                    "isLValue": true,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "2917:5:46",
                                    "memberName": "token",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 11326,
                                    "src": "2910:12:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                                      "typeString": "contract ISuperfluidToken"
                                    }
                                  },
                                  {
                                    "arguments": [
                                      {
                                        "id": 11444,
                                        "name": "this",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": -28,
                                        "src": "2952:4:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_contract$_AgreementLibrary_$11813",
                                          "typeString": "library AgreementLibrary"
                                        }
                                      }
                                    ],
                                    "expression": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_contract$_AgreementLibrary_$11813",
                                          "typeString": "library AgreementLibrary"
                                        }
                                      ],
                                      "id": 11443,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": true,
                                      "lValueRequested": false,
                                      "nodeType": "ElementaryTypeNameExpression",
                                      "src": "2944:7:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_type$_t_address_$",
                                        "typeString": "type(address)"
                                      },
                                      "typeName": {
                                        "id": 11442,
                                        "name": "address",
                                        "nodeType": "ElementaryTypeName",
                                        "src": "2944:7:46",
                                        "typeDescriptions": {}
                                      }
                                    },
                                    "id": 11445,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "kind": "typeConversion",
                                    "lValueRequested": false,
                                    "nameLocations": [],
                                    "names": [],
                                    "nodeType": "FunctionCall",
                                    "src": "2944:13:46",
                                    "tryCall": false,
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_address",
                                      "typeString": "address"
                                    }
                                  },
                                  {
                                    "expression": {
                                      "id": 11446,
                                      "name": "inputs",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 11382,
                                      "src": "3000:6:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                        "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                      }
                                    },
                                    "id": 11447,
                                    "isConstant": false,
                                    "isLValue": true,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "3007:11:46",
                                    "memberName": "agreementId",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 11330,
                                    "src": "3000:18:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes32",
                                      "typeString": "bytes32"
                                    }
                                  },
                                  {
                                    "expression": {
                                      "id": 11448,
                                      "name": "inputs",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 11382,
                                      "src": "3040:6:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                        "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                      }
                                    },
                                    "id": 11449,
                                    "isConstant": false,
                                    "isLValue": true,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "3047:13:46",
                                    "memberName": "agreementData",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 11332,
                                    "src": "3040:20:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  },
                                  {
                                    "arguments": [
                                      {
                                        "hexValue": "30",
                                        "id": 11452,
                                        "isConstant": false,
                                        "isLValue": false,
                                        "isPure": true,
                                        "kind": "number",
                                        "lValueRequested": false,
                                        "nodeType": "Literal",
                                        "src": "3092:1:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_rational_0_by_1",
                                          "typeString": "int_const 0"
                                        },
                                        "value": "0"
                                      }
                                    ],
                                    "expression": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_rational_0_by_1",
                                          "typeString": "int_const 0"
                                        }
                                      ],
                                      "id": 11451,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": true,
                                      "lValueRequested": false,
                                      "nodeType": "NewExpression",
                                      "src": "3082:9:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_function_objectcreation_pure$_t_uint256_$returns$_t_bytes_memory_ptr_$",
                                        "typeString": "function (uint256) pure returns (bytes memory)"
                                      },
                                      "typeName": {
                                        "id": 11450,
                                        "name": "bytes",
                                        "nodeType": "ElementaryTypeName",
                                        "src": "3086:5:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_bytes_storage_ptr",
                                          "typeString": "bytes"
                                        }
                                      }
                                    },
                                    "id": 11453,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": true,
                                    "kind": "functionCall",
                                    "lValueRequested": false,
                                    "nameLocations": [],
                                    "names": [],
                                    "nodeType": "FunctionCall",
                                    "src": "3082:12:46",
                                    "tryCall": false,
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  }
                                ],
                                "expression": {
                                  "argumentTypes": [
                                    {
                                      "typeIdentifier": "t_bytes4",
                                      "typeString": "bytes4"
                                    },
                                    {
                                      "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                                      "typeString": "contract ISuperfluidToken"
                                    },
                                    {
                                      "typeIdentifier": "t_address",
                                      "typeString": "address"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes32",
                                      "typeString": "bytes32"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  ],
                                  "expression": {
                                    "id": 11434,
                                    "name": "abi",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": -1,
                                    "src": "2808:3:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_magic_abi",
                                      "typeString": "abi"
                                    }
                                  },
                                  "id": 11435,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "lValueRequested": false,
                                  "memberLocation": "2812:18:46",
                                  "memberName": "encodeWithSelector",
                                  "nodeType": "MemberAccess",
                                  "src": "2808:22:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_function_abiencodewithselector_pure$_t_bytes4_$returns$_t_bytes_memory_ptr_$",
                                    "typeString": "function (bytes4) pure returns (bytes memory)"
                                  }
                                },
                                "id": 11454,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "kind": "functionCall",
                                "lValueRequested": false,
                                "nameLocations": [],
                                "names": [],
                                "nodeType": "FunctionCall",
                                "src": "2808:323:46",
                                "tryCall": false,
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                }
                              },
                              "nodeType": "VariableDeclarationStatement",
                              "src": "2784:347:46"
                            },
                            {
                              "expression": {
                                "id": 11474,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftHandSide": {
                                  "id": 11456,
                                  "name": "cbdata",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 11387,
                                  "src": "3149:6:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes_memory_ptr",
                                    "typeString": "bytes memory"
                                  }
                                },
                                "nodeType": "Assignment",
                                "operator": "=",
                                "rightHandSide": {
                                  "arguments": [
                                    {
                                      "arguments": [
                                        {
                                          "expression": {
                                            "id": 11463,
                                            "name": "inputs",
                                            "nodeType": "Identifier",
                                            "overloadedDeclarations": [],
                                            "referencedDeclaration": 11382,
                                            "src": "3235:6:46",
                                            "typeDescriptions": {
                                              "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                              "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                            }
                                          },
                                          "id": 11464,
                                          "isConstant": false,
                                          "isLValue": true,
                                          "isPure": false,
                                          "lValueRequested": false,
                                          "memberLocation": "3242:7:46",
                                          "memberName": "account",
                                          "nodeType": "MemberAccess",
                                          "referencedDeclaration": 11328,
                                          "src": "3235:14:46",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        }
                                      ],
                                      "expression": {
                                        "argumentTypes": [
                                          {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        ],
                                        "id": 11462,
                                        "name": "ISuperApp",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 37667,
                                        "src": "3225:9:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_type$_t_contract$_ISuperApp_$37667_$",
                                          "typeString": "type(contract ISuperApp)"
                                        }
                                      },
                                      "id": 11465,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "kind": "typeConversion",
                                      "lValueRequested": false,
                                      "nameLocations": [],
                                      "names": [],
                                      "nodeType": "FunctionCall",
                                      "src": "3225:25:46",
                                      "tryCall": false,
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_contract$_ISuperApp_$37667",
                                        "typeString": "contract ISuperApp"
                                      }
                                    },
                                    {
                                      "id": 11466,
                                      "name": "callData",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 11433,
                                      "src": "3272:8:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    },
                                    {
                                      "commonType": {
                                        "typeIdentifier": "t_uint256",
                                        "typeString": "uint256"
                                      },
                                      "id": 11471,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "lValueRequested": false,
                                      "leftExpression": {
                                        "expression": {
                                          "id": 11467,
                                          "name": "inputs",
                                          "nodeType": "Identifier",
                                          "overloadedDeclarations": [],
                                          "referencedDeclaration": 11382,
                                          "src": "3302:6:46",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                            "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                          }
                                        },
                                        "id": 11468,
                                        "isConstant": false,
                                        "isLValue": true,
                                        "isPure": false,
                                        "lValueRequested": false,
                                        "memberLocation": "3309:7:46",
                                        "memberName": "noopBit",
                                        "nodeType": "MemberAccess",
                                        "referencedDeclaration": 11338,
                                        "src": "3302:14:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      },
                                      "nodeType": "BinaryOperation",
                                      "operator": "==",
                                      "rightExpression": {
                                        "expression": {
                                          "id": 11469,
                                          "name": "SuperAppDefinitions",
                                          "nodeType": "Identifier",
                                          "overloadedDeclarations": [],
                                          "referencedDeclaration": 37190,
                                          "src": "3320:19:46",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$37190_$",
                                            "typeString": "type(library SuperAppDefinitions)"
                                          }
                                        },
                                        "id": 11470,
                                        "isConstant": false,
                                        "isLValue": false,
                                        "isPure": true,
                                        "lValueRequested": false,
                                        "memberLocation": "3340:32:46",
                                        "memberName": "BEFORE_AGREEMENT_TERMINATED_NOOP",
                                        "nodeType": "MemberAccess",
                                        "referencedDeclaration": 37130,
                                        "src": "3320:52:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      },
                                      "src": "3302:70:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bool",
                                        "typeString": "bool"
                                      }
                                    },
                                    {
                                      "id": 11472,
                                      "name": "appCtx",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 11419,
                                      "src": "3394:6:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    }
                                  ],
                                  "expression": {
                                    "argumentTypes": [
                                      {
                                        "typeIdentifier": "t_contract$_ISuperApp_$37667",
                                        "typeString": "contract ISuperApp"
                                      },
                                      {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      },
                                      {
                                        "typeIdentifier": "t_bool",
                                        "typeString": "bool"
                                      },
                                      {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    ],
                                    "expression": {
                                      "arguments": [
                                        {
                                          "expression": {
                                            "id": 11458,
                                            "name": "msg",
                                            "nodeType": "Identifier",
                                            "overloadedDeclarations": [],
                                            "referencedDeclaration": -15,
                                            "src": "3170:3:46",
                                            "typeDescriptions": {
                                              "typeIdentifier": "t_magic_message",
                                              "typeString": "msg"
                                            }
                                          },
                                          "id": 11459,
                                          "isConstant": false,
                                          "isLValue": false,
                                          "isPure": false,
                                          "lValueRequested": false,
                                          "memberLocation": "3174:6:46",
                                          "memberName": "sender",
                                          "nodeType": "MemberAccess",
                                          "src": "3170:10:46",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        }
                                      ],
                                      "expression": {
                                        "argumentTypes": [
                                          {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        ],
                                        "id": 11457,
                                        "name": "ISuperfluid",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 38940,
                                        "src": "3158:11:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$38940_$",
                                          "typeString": "type(contract ISuperfluid)"
                                        }
                                      },
                                      "id": 11460,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "kind": "typeConversion",
                                      "lValueRequested": false,
                                      "nameLocations": [],
                                      "names": [],
                                      "nodeType": "FunctionCall",
                                      "src": "3158:23:46",
                                      "tryCall": false,
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_contract$_ISuperfluid_$38940",
                                        "typeString": "contract ISuperfluid"
                                      }
                                    },
                                    "id": 11461,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "3182:21:46",
                                    "memberName": "callAppBeforeCallback",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 38749,
                                    "src": "3158:45:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_function_external_nonpayable$_t_contract$_ISuperApp_$37667_$_t_bytes_memory_ptr_$_t_bool_$_t_bytes_memory_ptr_$returns$_t_bytes_memory_ptr_$",
                                      "typeString": "function (contract ISuperApp,bytes memory,bool,bytes memory) external returns (bytes memory)"
                                    }
                                  },
                                  "id": 11473,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "kind": "functionCall",
                                  "lValueRequested": false,
                                  "nameLocations": [],
                                  "names": [],
                                  "nodeType": "FunctionCall",
                                  "src": "3158:243:46",
                                  "tryCall": false,
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes_memory_ptr",
                                    "typeString": "bytes memory"
                                  }
                                },
                                "src": "3149:252:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                }
                              },
                              "id": 11475,
                              "nodeType": "ExpressionStatement",
                              "src": "3149:252:46"
                            }
                          ]
                        }
                      },
                      {
                        "expression": {
                          "arguments": [
                            {
                              "id": 11479,
                              "name": "ctx",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 11384,
                              "src": "3559:3:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_bytes_memory_ptr",
                                "typeString": "bytes memory"
                              }
                            },
                            {
                              "hexValue": "30",
                              "id": 11480,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": true,
                              "kind": "number",
                              "lValueRequested": false,
                              "nodeType": "Literal",
                              "src": "3564:1:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_rational_0_by_1",
                                "typeString": "int_const 0"
                              },
                              "value": "0"
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_bytes_memory_ptr",
                                "typeString": "bytes memory"
                              },
                              {
                                "typeIdentifier": "t_rational_0_by_1",
                                "typeString": "int_const 0"
                              }
                            ],
                            "id": 11478,
                            "name": "_popCallbackStack",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 11761,
                            "src": "3541:17:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_function_internal_nonpayable$_t_bytes_memory_ptr_$_t_int256_$returns$_t_bytes_memory_ptr_$",
                              "typeString": "function (bytes memory,int256) returns (bytes memory)"
                            }
                          },
                          "id": 11481,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "functionCall",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "3541:25:46",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_bytes_memory_ptr",
                            "typeString": "bytes memory"
                          }
                        },
                        "id": 11482,
                        "nodeType": "ExpressionStatement",
                        "src": "3541:25:46"
                      }
                    ]
                  }
                }
              ]
            },
            "id": 11486,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "callAppBeforeCallback",
            "nameLocation": "2274:21:46",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 11385,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11382,
                  "mutability": "mutable",
                  "name": "inputs",
                  "nameLocation": "2327:6:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11486,
                  "src": "2305:28:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                    "typeString": "struct AgreementLibrary.CallbackInputs"
                  },
                  "typeName": {
                    "id": 11381,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 11380,
                      "name": "CallbackInputs",
                      "nameLocations": [
                        "2305:14:46"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 11339,
                      "src": "2305:14:46"
                    },
                    "referencedDeclaration": 11339,
                    "src": "2305:14:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_CallbackInputs_$11339_storage_ptr",
                      "typeString": "struct AgreementLibrary.CallbackInputs"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11384,
                  "mutability": "mutable",
                  "name": "ctx",
                  "nameLocation": "2356:3:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11486,
                  "src": "2343:16:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 11383,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "2343:5:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "2295:70:46"
            },
            "returnParameters": {
              "id": 11388,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11387,
                  "mutability": "mutable",
                  "name": "cbdata",
                  "nameLocation": "2412:6:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11486,
                  "src": "2399:19:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 11386,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "2399:5:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "2398:21:46"
            },
            "scope": 11813,
            "src": "2265:1318:46",
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "body": {
              "id": 11626,
              "nodeType": "Block",
              "src": "3828:1566:46",
              "statements": [
                {
                  "assignments": [
                    11502
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 11502,
                      "mutability": "mutable",
                      "name": "isSuperApp",
                      "nameLocation": "3843:10:46",
                      "nodeType": "VariableDeclaration",
                      "scope": 11626,
                      "src": "3838:15:46",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      },
                      "typeName": {
                        "id": 11501,
                        "name": "bool",
                        "nodeType": "ElementaryTypeName",
                        "src": "3838:4:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 11503,
                  "nodeType": "VariableDeclarationStatement",
                  "src": "3838:15:46"
                },
                {
                  "assignments": [
                    11505
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 11505,
                      "mutability": "mutable",
                      "name": "isJailed",
                      "nameLocation": "3868:8:46",
                      "nodeType": "VariableDeclaration",
                      "scope": 11626,
                      "src": "3863:13:46",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      },
                      "typeName": {
                        "id": 11504,
                        "name": "bool",
                        "nodeType": "ElementaryTypeName",
                        "src": "3863:4:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 11506,
                  "nodeType": "VariableDeclarationStatement",
                  "src": "3863:13:46"
                },
                {
                  "assignments": [
                    11508
                  ],
                  "declarations": [
                    {
                      "constant": false,
                      "id": 11508,
                      "mutability": "mutable",
                      "name": "noopMask",
                      "nameLocation": "3894:8:46",
                      "nodeType": "VariableDeclaration",
                      "scope": 11626,
                      "src": "3886:16:46",
                      "stateVariable": false,
                      "storageLocation": "default",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "typeName": {
                        "id": 11507,
                        "name": "uint256",
                        "nodeType": "ElementaryTypeName",
                        "src": "3886:7:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "visibility": "internal"
                    }
                  ],
                  "id": 11509,
                  "nodeType": "VariableDeclarationStatement",
                  "src": "3886:16:46"
                },
                {
                  "expression": {
                    "id": 11524,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "components": [
                        {
                          "id": 11510,
                          "name": "isSuperApp",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 11502,
                          "src": "3913:10:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        {
                          "id": 11511,
                          "name": "isJailed",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 11505,
                          "src": "3925:8:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        {
                          "id": 11512,
                          "name": "noopMask",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 11508,
                          "src": "3935:8:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        }
                      ],
                      "id": 11513,
                      "isConstant": false,
                      "isInlineArray": false,
                      "isLValue": true,
                      "isPure": false,
                      "lValueRequested": true,
                      "nodeType": "TupleExpression",
                      "src": "3912:32:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_tuple$_t_bool_$_t_bool_$_t_uint256_$",
                        "typeString": "tuple(bool,bool,uint256)"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "arguments": [
                        {
                          "arguments": [
                            {
                              "expression": {
                                "id": 11520,
                                "name": "inputs",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 11489,
                                "src": "3996:6:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                  "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                }
                              },
                              "id": 11521,
                              "isConstant": false,
                              "isLValue": true,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "4003:7:46",
                              "memberName": "account",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 11328,
                              "src": "3996:14:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            ],
                            "id": 11519,
                            "name": "ISuperApp",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 37667,
                            "src": "3986:9:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_ISuperApp_$37667_$",
                              "typeString": "type(contract ISuperApp)"
                            }
                          },
                          "id": 11522,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "3986:25:46",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperApp_$37667",
                            "typeString": "contract ISuperApp"
                          }
                        }
                      ],
                      "expression": {
                        "argumentTypes": [
                          {
                            "typeIdentifier": "t_contract$_ISuperApp_$37667",
                            "typeString": "contract ISuperApp"
                          }
                        ],
                        "expression": {
                          "arguments": [
                            {
                              "expression": {
                                "id": 11515,
                                "name": "msg",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": -15,
                                "src": "3959:3:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_magic_message",
                                  "typeString": "msg"
                                }
                              },
                              "id": 11516,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "3963:6:46",
                              "memberName": "sender",
                              "nodeType": "MemberAccess",
                              "src": "3959:10:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            ],
                            "id": 11514,
                            "name": "ISuperfluid",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 38940,
                            "src": "3947:11:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$38940_$",
                              "typeString": "type(contract ISuperfluid)"
                            }
                          },
                          "id": 11517,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "3947:23:46",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperfluid_$38940",
                            "typeString": "contract ISuperfluid"
                          }
                        },
                        "id": 11518,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "3971:14:46",
                        "memberName": "getAppManifest",
                        "nodeType": "MemberAccess",
                        "referencedDeclaration": 38706,
                        "src": "3947:38:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_function_external_view$_t_contract$_ISuperApp_$37667_$returns$_t_bool_$_t_bool_$_t_uint256_$",
                          "typeString": "function (contract ISuperApp) view external returns (bool,bool,uint256)"
                        }
                      },
                      "id": 11523,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "kind": "functionCall",
                      "lValueRequested": false,
                      "nameLocations": [],
                      "names": [],
                      "nodeType": "FunctionCall",
                      "src": "3947:65:46",
                      "tryCall": false,
                      "typeDescriptions": {
                        "typeIdentifier": "t_tuple$_t_bool_$_t_bool_$_t_uint256_$",
                        "typeString": "tuple(bool,bool,uint256)"
                      }
                    },
                    "src": "3912:100:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_tuple$__$",
                      "typeString": "tuple()"
                    }
                  },
                  "id": 11525,
                  "nodeType": "ExpressionStatement",
                  "src": "3912:100:46"
                },
                {
                  "expression": {
                    "id": 11528,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "id": 11526,
                      "name": "newCtx",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11499,
                      "src": "4023:6:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes_memory_ptr",
                        "typeString": "bytes memory"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "id": 11527,
                      "name": "ctx",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11493,
                      "src": "4032:3:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes_memory_ptr",
                        "typeString": "bytes memory"
                      }
                    },
                    "src": "4023:12:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_memory_ptr",
                      "typeString": "bytes memory"
                    }
                  },
                  "id": 11529,
                  "nodeType": "ExpressionStatement",
                  "src": "4023:12:46"
                },
                {
                  "condition": {
                    "commonType": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    },
                    "id": 11533,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftExpression": {
                      "id": 11530,
                      "name": "isSuperApp",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11502,
                      "src": "4049:10:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "nodeType": "BinaryOperation",
                    "operator": "&&",
                    "rightExpression": {
                      "id": 11532,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "nodeType": "UnaryOperation",
                      "operator": "!",
                      "prefix": true,
                      "src": "4063:9:46",
                      "subExpression": {
                        "id": 11531,
                        "name": "isJailed",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11505,
                        "src": "4064:8:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "src": "4049:23:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "id": 11625,
                  "nodeType": "IfStatement",
                  "src": "4045:1343:46",
                  "trueBody": {
                    "id": 11624,
                    "nodeType": "Block",
                    "src": "4074:1314:46",
                    "statements": [
                      {
                        "expression": {
                          "id": 11539,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftHandSide": {
                            "id": 11534,
                            "name": "newCtx",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 11499,
                            "src": "4088:6:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes memory"
                            }
                          },
                          "nodeType": "Assignment",
                          "operator": "=",
                          "rightHandSide": {
                            "arguments": [
                              {
                                "id": 11536,
                                "name": "newCtx",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 11499,
                                "src": "4116:6:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                }
                              },
                              {
                                "id": 11537,
                                "name": "inputs",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 11489,
                                "src": "4124:6:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                  "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                }
                              }
                            ],
                            "expression": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                },
                                {
                                  "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                  "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                }
                              ],
                              "id": 11535,
                              "name": "_pushCallbackStack",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 11742,
                              "src": "4097:18:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_function_internal_nonpayable$_t_bytes_memory_ptr_$_t_struct$_CallbackInputs_$11339_memory_ptr_$returns$_t_bytes_memory_ptr_$",
                                "typeString": "function (bytes memory,struct AgreementLibrary.CallbackInputs memory) returns (bytes memory)"
                              }
                            },
                            "id": 11538,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "kind": "functionCall",
                            "lValueRequested": false,
                            "nameLocations": [],
                            "names": [],
                            "nodeType": "FunctionCall",
                            "src": "4097:34:46",
                            "tryCall": false,
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes memory"
                            }
                          },
                          "src": "4088:43:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bytes_memory_ptr",
                            "typeString": "bytes memory"
                          }
                        },
                        "id": 11540,
                        "nodeType": "ExpressionStatement",
                        "src": "4088:43:46"
                      },
                      {
                        "condition": {
                          "commonType": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          "id": 11547,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftExpression": {
                            "components": [
                              {
                                "commonType": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                "id": 11544,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftExpression": {
                                  "id": 11541,
                                  "name": "noopMask",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 11508,
                                  "src": "4150:8:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "nodeType": "BinaryOperation",
                                "operator": "&",
                                "rightExpression": {
                                  "expression": {
                                    "id": 11542,
                                    "name": "inputs",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 11489,
                                    "src": "4161:6:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                      "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                    }
                                  },
                                  "id": 11543,
                                  "isConstant": false,
                                  "isLValue": true,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "memberLocation": "4168:7:46",
                                  "memberName": "noopBit",
                                  "nodeType": "MemberAccess",
                                  "referencedDeclaration": 11338,
                                  "src": "4161:14:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_uint256",
                                    "typeString": "uint256"
                                  }
                                },
                                "src": "4150:25:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              }
                            ],
                            "id": 11545,
                            "isConstant": false,
                            "isInlineArray": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "nodeType": "TupleExpression",
                            "src": "4149:27:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "BinaryOperation",
                          "operator": "==",
                          "rightExpression": {
                            "hexValue": "30",
                            "id": 11546,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": true,
                            "kind": "number",
                            "lValueRequested": false,
                            "nodeType": "Literal",
                            "src": "4180:1:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_rational_0_by_1",
                              "typeString": "int_const 0"
                            },
                            "value": "0"
                          },
                          "src": "4149:32:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "id": 11615,
                        "nodeType": "IfStatement",
                        "src": "4145:1050:46",
                        "trueBody": {
                          "id": 11614,
                          "nodeType": "Block",
                          "src": "4183:1012:46",
                          "statements": [
                            {
                              "assignments": [
                                11549
                              ],
                              "declarations": [
                                {
                                  "constant": false,
                                  "id": 11549,
                                  "mutability": "mutable",
                                  "name": "callData",
                                  "nameLocation": "4214:8:46",
                                  "nodeType": "VariableDeclaration",
                                  "scope": 11614,
                                  "src": "4201:21:46",
                                  "stateVariable": false,
                                  "storageLocation": "memory",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes_memory_ptr",
                                    "typeString": "bytes"
                                  },
                                  "typeName": {
                                    "id": 11548,
                                    "name": "bytes",
                                    "nodeType": "ElementaryTypeName",
                                    "src": "4201:5:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_storage_ptr",
                                      "typeString": "bytes"
                                    }
                                  },
                                  "visibility": "internal"
                                }
                              ],
                              "id": 11572,
                              "initialValue": {
                                "arguments": [
                                  {
                                    "arguments": [
                                      {
                                        "expression": {
                                          "id": 11553,
                                          "name": "inputs",
                                          "nodeType": "Identifier",
                                          "overloadedDeclarations": [],
                                          "referencedDeclaration": 11489,
                                          "src": "4290:6:46",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                            "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                          }
                                        },
                                        "id": 11554,
                                        "isConstant": false,
                                        "isLValue": true,
                                        "isPure": false,
                                        "lValueRequested": false,
                                        "memberLocation": "4297:7:46",
                                        "memberName": "noopBit",
                                        "nodeType": "MemberAccess",
                                        "referencedDeclaration": 11338,
                                        "src": "4290:14:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      }
                                    ],
                                    "expression": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      ],
                                      "id": 11552,
                                      "name": "_selectorFromNoopBit",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 11711,
                                      "src": "4269:20:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_function_internal_pure$_t_uint256_$returns$_t_bytes4_$",
                                        "typeString": "function (uint256) pure returns (bytes4)"
                                      }
                                    },
                                    "id": 11555,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "kind": "functionCall",
                                    "lValueRequested": false,
                                    "nameLocations": [],
                                    "names": [],
                                    "nodeType": "FunctionCall",
                                    "src": "4269:36:46",
                                    "tryCall": false,
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes4",
                                      "typeString": "bytes4"
                                    }
                                  },
                                  {
                                    "expression": {
                                      "id": 11556,
                                      "name": "inputs",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 11489,
                                      "src": "4327:6:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                        "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                      }
                                    },
                                    "id": 11557,
                                    "isConstant": false,
                                    "isLValue": true,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "4334:5:46",
                                    "memberName": "token",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 11326,
                                    "src": "4327:12:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                                      "typeString": "contract ISuperfluidToken"
                                    }
                                  },
                                  {
                                    "arguments": [
                                      {
                                        "id": 11560,
                                        "name": "this",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": -28,
                                        "src": "4369:4:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_contract$_AgreementLibrary_$11813",
                                          "typeString": "library AgreementLibrary"
                                        }
                                      }
                                    ],
                                    "expression": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_contract$_AgreementLibrary_$11813",
                                          "typeString": "library AgreementLibrary"
                                        }
                                      ],
                                      "id": 11559,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": true,
                                      "lValueRequested": false,
                                      "nodeType": "ElementaryTypeNameExpression",
                                      "src": "4361:7:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_type$_t_address_$",
                                        "typeString": "type(address)"
                                      },
                                      "typeName": {
                                        "id": 11558,
                                        "name": "address",
                                        "nodeType": "ElementaryTypeName",
                                        "src": "4361:7:46",
                                        "typeDescriptions": {}
                                      }
                                    },
                                    "id": 11561,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "kind": "typeConversion",
                                    "lValueRequested": false,
                                    "nameLocations": [],
                                    "names": [],
                                    "nodeType": "FunctionCall",
                                    "src": "4361:13:46",
                                    "tryCall": false,
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_address",
                                      "typeString": "address"
                                    }
                                  },
                                  {
                                    "expression": {
                                      "id": 11562,
                                      "name": "inputs",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 11489,
                                      "src": "4417:6:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                        "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                      }
                                    },
                                    "id": 11563,
                                    "isConstant": false,
                                    "isLValue": true,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "4424:11:46",
                                    "memberName": "agreementId",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 11330,
                                    "src": "4417:18:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes32",
                                      "typeString": "bytes32"
                                    }
                                  },
                                  {
                                    "expression": {
                                      "id": 11564,
                                      "name": "inputs",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 11489,
                                      "src": "4457:6:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                        "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                      }
                                    },
                                    "id": 11565,
                                    "isConstant": false,
                                    "isLValue": true,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "4464:13:46",
                                    "memberName": "agreementData",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 11332,
                                    "src": "4457:20:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  },
                                  {
                                    "id": 11566,
                                    "name": "cbdata",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 11491,
                                    "src": "4499:6:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  },
                                  {
                                    "arguments": [
                                      {
                                        "hexValue": "30",
                                        "id": 11569,
                                        "isConstant": false,
                                        "isLValue": false,
                                        "isPure": true,
                                        "kind": "number",
                                        "lValueRequested": false,
                                        "nodeType": "Literal",
                                        "src": "4537:1:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_rational_0_by_1",
                                          "typeString": "int_const 0"
                                        },
                                        "value": "0"
                                      }
                                    ],
                                    "expression": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_rational_0_by_1",
                                          "typeString": "int_const 0"
                                        }
                                      ],
                                      "id": 11568,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": true,
                                      "lValueRequested": false,
                                      "nodeType": "NewExpression",
                                      "src": "4527:9:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_function_objectcreation_pure$_t_uint256_$returns$_t_bytes_memory_ptr_$",
                                        "typeString": "function (uint256) pure returns (bytes memory)"
                                      },
                                      "typeName": {
                                        "id": 11567,
                                        "name": "bytes",
                                        "nodeType": "ElementaryTypeName",
                                        "src": "4531:5:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_bytes_storage_ptr",
                                          "typeString": "bytes"
                                        }
                                      }
                                    },
                                    "id": 11570,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": true,
                                    "kind": "functionCall",
                                    "lValueRequested": false,
                                    "nameLocations": [],
                                    "names": [],
                                    "nodeType": "FunctionCall",
                                    "src": "4527:12:46",
                                    "tryCall": false,
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  }
                                ],
                                "expression": {
                                  "argumentTypes": [
                                    {
                                      "typeIdentifier": "t_bytes4",
                                      "typeString": "bytes4"
                                    },
                                    {
                                      "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                                      "typeString": "contract ISuperfluidToken"
                                    },
                                    {
                                      "typeIdentifier": "t_address",
                                      "typeString": "address"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes32",
                                      "typeString": "bytes32"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    },
                                    {
                                      "typeIdentifier": "t_bytes_memory_ptr",
                                      "typeString": "bytes memory"
                                    }
                                  ],
                                  "expression": {
                                    "id": 11550,
                                    "name": "abi",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": -1,
                                    "src": "4225:3:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_magic_abi",
                                      "typeString": "abi"
                                    }
                                  },
                                  "id": 11551,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "lValueRequested": false,
                                  "memberLocation": "4229:18:46",
                                  "memberName": "encodeWithSelector",
                                  "nodeType": "MemberAccess",
                                  "src": "4225:22:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_function_abiencodewithselector_pure$_t_bytes4_$returns$_t_bytes_memory_ptr_$",
                                    "typeString": "function (bytes4) pure returns (bytes memory)"
                                  }
                                },
                                "id": 11571,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "kind": "functionCall",
                                "lValueRequested": false,
                                "nameLocations": [],
                                "names": [],
                                "nodeType": "FunctionCall",
                                "src": "4225:351:46",
                                "tryCall": false,
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                }
                              },
                              "nodeType": "VariableDeclarationStatement",
                              "src": "4201:375:46"
                            },
                            {
                              "expression": {
                                "id": 11591,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftHandSide": {
                                  "id": 11573,
                                  "name": "newCtx",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 11499,
                                  "src": "4594:6:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes_memory_ptr",
                                    "typeString": "bytes memory"
                                  }
                                },
                                "nodeType": "Assignment",
                                "operator": "=",
                                "rightHandSide": {
                                  "arguments": [
                                    {
                                      "arguments": [
                                        {
                                          "expression": {
                                            "id": 11580,
                                            "name": "inputs",
                                            "nodeType": "Identifier",
                                            "overloadedDeclarations": [],
                                            "referencedDeclaration": 11489,
                                            "src": "4679:6:46",
                                            "typeDescriptions": {
                                              "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                              "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                            }
                                          },
                                          "id": 11581,
                                          "isConstant": false,
                                          "isLValue": true,
                                          "isPure": false,
                                          "lValueRequested": false,
                                          "memberLocation": "4686:7:46",
                                          "memberName": "account",
                                          "nodeType": "MemberAccess",
                                          "referencedDeclaration": 11328,
                                          "src": "4679:14:46",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        }
                                      ],
                                      "expression": {
                                        "argumentTypes": [
                                          {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        ],
                                        "id": 11579,
                                        "name": "ISuperApp",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 37667,
                                        "src": "4669:9:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_type$_t_contract$_ISuperApp_$37667_$",
                                          "typeString": "type(contract ISuperApp)"
                                        }
                                      },
                                      "id": 11582,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "kind": "typeConversion",
                                      "lValueRequested": false,
                                      "nameLocations": [],
                                      "names": [],
                                      "nodeType": "FunctionCall",
                                      "src": "4669:25:46",
                                      "tryCall": false,
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_contract$_ISuperApp_$37667",
                                        "typeString": "contract ISuperApp"
                                      }
                                    },
                                    {
                                      "id": 11583,
                                      "name": "callData",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 11549,
                                      "src": "4716:8:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    },
                                    {
                                      "commonType": {
                                        "typeIdentifier": "t_uint256",
                                        "typeString": "uint256"
                                      },
                                      "id": 11588,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "lValueRequested": false,
                                      "leftExpression": {
                                        "expression": {
                                          "id": 11584,
                                          "name": "inputs",
                                          "nodeType": "Identifier",
                                          "overloadedDeclarations": [],
                                          "referencedDeclaration": 11489,
                                          "src": "4746:6:46",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                            "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                          }
                                        },
                                        "id": 11585,
                                        "isConstant": false,
                                        "isLValue": true,
                                        "isPure": false,
                                        "lValueRequested": false,
                                        "memberLocation": "4753:7:46",
                                        "memberName": "noopBit",
                                        "nodeType": "MemberAccess",
                                        "referencedDeclaration": 11338,
                                        "src": "4746:14:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      },
                                      "nodeType": "BinaryOperation",
                                      "operator": "==",
                                      "rightExpression": {
                                        "expression": {
                                          "id": 11586,
                                          "name": "SuperAppDefinitions",
                                          "nodeType": "Identifier",
                                          "overloadedDeclarations": [],
                                          "referencedDeclaration": 37190,
                                          "src": "4764:19:46",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$37190_$",
                                            "typeString": "type(library SuperAppDefinitions)"
                                          }
                                        },
                                        "id": 11587,
                                        "isConstant": false,
                                        "isLValue": false,
                                        "isPure": true,
                                        "lValueRequested": false,
                                        "memberLocation": "4784:31:46",
                                        "memberName": "AFTER_AGREEMENT_TERMINATED_NOOP",
                                        "nodeType": "MemberAccess",
                                        "referencedDeclaration": 37138,
                                        "src": "4764:51:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      },
                                      "src": "4746:69:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bool",
                                        "typeString": "bool"
                                      }
                                    },
                                    {
                                      "id": 11589,
                                      "name": "newCtx",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 11499,
                                      "src": "4837:6:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    }
                                  ],
                                  "expression": {
                                    "argumentTypes": [
                                      {
                                        "typeIdentifier": "t_contract$_ISuperApp_$37667",
                                        "typeString": "contract ISuperApp"
                                      },
                                      {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      },
                                      {
                                        "typeIdentifier": "t_bool",
                                        "typeString": "bool"
                                      },
                                      {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    ],
                                    "expression": {
                                      "arguments": [
                                        {
                                          "expression": {
                                            "id": 11575,
                                            "name": "msg",
                                            "nodeType": "Identifier",
                                            "overloadedDeclarations": [],
                                            "referencedDeclaration": -15,
                                            "src": "4615:3:46",
                                            "typeDescriptions": {
                                              "typeIdentifier": "t_magic_message",
                                              "typeString": "msg"
                                            }
                                          },
                                          "id": 11576,
                                          "isConstant": false,
                                          "isLValue": false,
                                          "isPure": false,
                                          "lValueRequested": false,
                                          "memberLocation": "4619:6:46",
                                          "memberName": "sender",
                                          "nodeType": "MemberAccess",
                                          "src": "4615:10:46",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        }
                                      ],
                                      "expression": {
                                        "argumentTypes": [
                                          {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        ],
                                        "id": 11574,
                                        "name": "ISuperfluid",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 38940,
                                        "src": "4603:11:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$38940_$",
                                          "typeString": "type(contract ISuperfluid)"
                                        }
                                      },
                                      "id": 11577,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "kind": "typeConversion",
                                      "lValueRequested": false,
                                      "nameLocations": [],
                                      "names": [],
                                      "nodeType": "FunctionCall",
                                      "src": "4603:23:46",
                                      "tryCall": false,
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_contract$_ISuperfluid_$38940",
                                        "typeString": "contract ISuperfluid"
                                      }
                                    },
                                    "id": 11578,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "4627:20:46",
                                    "memberName": "callAppAfterCallback",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 38764,
                                    "src": "4603:44:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_function_external_nonpayable$_t_contract$_ISuperApp_$37667_$_t_bytes_memory_ptr_$_t_bool_$_t_bytes_memory_ptr_$returns$_t_bytes_memory_ptr_$",
                                      "typeString": "function (contract ISuperApp,bytes memory,bool,bytes memory) external returns (bytes memory)"
                                    }
                                  },
                                  "id": 11590,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "kind": "functionCall",
                                  "lValueRequested": false,
                                  "nameLocations": [],
                                  "names": [],
                                  "nodeType": "FunctionCall",
                                  "src": "4603:241:46",
                                  "tryCall": false,
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes_memory_ptr",
                                    "typeString": "bytes memory"
                                  }
                                },
                                "src": "4594:250:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                }
                              },
                              "id": 11592,
                              "nodeType": "ExpressionStatement",
                              "src": "4594:250:46"
                            },
                            {
                              "expression": {
                                "id": 11601,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftHandSide": {
                                  "id": 11593,
                                  "name": "appContext",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 11497,
                                  "src": "4863:10:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_struct$_Context_$38872_memory_ptr",
                                    "typeString": "struct ISuperfluid.Context memory"
                                  }
                                },
                                "nodeType": "Assignment",
                                "operator": "=",
                                "rightHandSide": {
                                  "arguments": [
                                    {
                                      "id": 11599,
                                      "name": "newCtx",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 11499,
                                      "src": "4910:6:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    }
                                  ],
                                  "expression": {
                                    "argumentTypes": [
                                      {
                                        "typeIdentifier": "t_bytes_memory_ptr",
                                        "typeString": "bytes memory"
                                      }
                                    ],
                                    "expression": {
                                      "arguments": [
                                        {
                                          "expression": {
                                            "id": 11595,
                                            "name": "msg",
                                            "nodeType": "Identifier",
                                            "overloadedDeclarations": [],
                                            "referencedDeclaration": -15,
                                            "src": "4888:3:46",
                                            "typeDescriptions": {
                                              "typeIdentifier": "t_magic_message",
                                              "typeString": "msg"
                                            }
                                          },
                                          "id": 11596,
                                          "isConstant": false,
                                          "isLValue": false,
                                          "isPure": false,
                                          "lValueRequested": false,
                                          "memberLocation": "4892:6:46",
                                          "memberName": "sender",
                                          "nodeType": "MemberAccess",
                                          "src": "4888:10:46",
                                          "typeDescriptions": {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        }
                                      ],
                                      "expression": {
                                        "argumentTypes": [
                                          {
                                            "typeIdentifier": "t_address",
                                            "typeString": "address"
                                          }
                                        ],
                                        "id": 11594,
                                        "name": "ISuperfluid",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 38940,
                                        "src": "4876:11:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$38940_$",
                                          "typeString": "type(contract ISuperfluid)"
                                        }
                                      },
                                      "id": 11597,
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "kind": "typeConversion",
                                      "lValueRequested": false,
                                      "nameLocations": [],
                                      "names": [],
                                      "nodeType": "FunctionCall",
                                      "src": "4876:23:46",
                                      "tryCall": false,
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_contract$_ISuperfluid_$38940",
                                        "typeString": "contract ISuperfluid"
                                      }
                                    },
                                    "id": 11598,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": false,
                                    "lValueRequested": false,
                                    "memberLocation": "4900:9:46",
                                    "memberName": "decodeCtx",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 38908,
                                    "src": "4876:33:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_function_external_pure$_t_bytes_memory_ptr_$returns$_t_struct$_Context_$38872_memory_ptr_$",
                                      "typeString": "function (bytes memory) pure external returns (struct ISuperfluid.Context memory)"
                                    }
                                  },
                                  "id": 11600,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "kind": "functionCall",
                                  "lValueRequested": false,
                                  "nameLocations": [],
                                  "names": [],
                                  "nodeType": "FunctionCall",
                                  "src": "4876:41:46",
                                  "tryCall": false,
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_struct$_Context_$38872_memory_ptr",
                                    "typeString": "struct ISuperfluid.Context memory"
                                  }
                                },
                                "src": "4863:54:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_struct$_Context_$38872_memory_ptr",
                                  "typeString": "struct ISuperfluid.Context memory"
                                }
                              },
                              "id": 11602,
                              "nodeType": "ExpressionStatement",
                              "src": "4863:54:46"
                            },
                            {
                              "expression": {
                                "id": 11612,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": false,
                                "lValueRequested": false,
                                "leftHandSide": {
                                  "expression": {
                                    "id": 11603,
                                    "name": "appContext",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 11497,
                                    "src": "5021:10:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_struct$_Context_$38872_memory_ptr",
                                      "typeString": "struct ISuperfluid.Context memory"
                                    }
                                  },
                                  "id": 11605,
                                  "isConstant": false,
                                  "isLValue": true,
                                  "isPure": false,
                                  "lValueRequested": true,
                                  "memberLocation": "5032:13:46",
                                  "memberName": "appCreditUsed",
                                  "nodeType": "MemberAccess",
                                  "referencedDeclaration": 38866,
                                  "src": "5021:24:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_int256",
                                    "typeString": "int256"
                                  }
                                },
                                "nodeType": "Assignment",
                                "operator": "=",
                                "rightHandSide": {
                                  "arguments": [
                                    {
                                      "expression": {
                                        "id": 11607,
                                        "name": "inputs",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 11489,
                                        "src": "5093:6:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                          "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                        }
                                      },
                                      "id": 11608,
                                      "isConstant": false,
                                      "isLValue": true,
                                      "isPure": false,
                                      "lValueRequested": false,
                                      "memberLocation": "5100:16:46",
                                      "memberName": "appCreditGranted",
                                      "nodeType": "MemberAccess",
                                      "referencedDeclaration": 11334,
                                      "src": "5093:23:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_uint256",
                                        "typeString": "uint256"
                                      }
                                    },
                                    {
                                      "expression": {
                                        "id": 11609,
                                        "name": "appContext",
                                        "nodeType": "Identifier",
                                        "overloadedDeclarations": [],
                                        "referencedDeclaration": 11497,
                                        "src": "5138:10:46",
                                        "typeDescriptions": {
                                          "typeIdentifier": "t_struct$_Context_$38872_memory_ptr",
                                          "typeString": "struct ISuperfluid.Context memory"
                                        }
                                      },
                                      "id": 11610,
                                      "isConstant": false,
                                      "isLValue": true,
                                      "isPure": false,
                                      "lValueRequested": false,
                                      "memberLocation": "5149:13:46",
                                      "memberName": "appCreditUsed",
                                      "nodeType": "MemberAccess",
                                      "referencedDeclaration": 38866,
                                      "src": "5138:24:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_int256",
                                        "typeString": "int256"
                                      }
                                    }
                                  ],
                                  "expression": {
                                    "argumentTypes": [
                                      {
                                        "typeIdentifier": "t_uint256",
                                        "typeString": "uint256"
                                      },
                                      {
                                        "typeIdentifier": "t_int256",
                                        "typeString": "int256"
                                      }
                                    ],
                                    "id": 11606,
                                    "name": "_adjustNewAppCreditUsed",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 11648,
                                    "src": "5048:23:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_int256_$returns$_t_int256_$",
                                      "typeString": "function (uint256,int256) pure returns (int256)"
                                    }
                                  },
                                  "id": 11611,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "kind": "functionCall",
                                  "lValueRequested": false,
                                  "nameLocations": [],
                                  "names": [],
                                  "nodeType": "FunctionCall",
                                  "src": "5048:132:46",
                                  "tryCall": false,
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_int256",
                                    "typeString": "int256"
                                  }
                                },
                                "src": "5021:159:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_int256",
                                  "typeString": "int256"
                                }
                              },
                              "id": 11613,
                              "nodeType": "ExpressionStatement",
                              "src": "5021:159:46"
                            }
                          ]
                        }
                      },
                      {
                        "expression": {
                          "id": 11622,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftHandSide": {
                            "id": 11616,
                            "name": "newCtx",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 11499,
                            "src": "5320:6:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes memory"
                            }
                          },
                          "nodeType": "Assignment",
                          "operator": "=",
                          "rightHandSide": {
                            "arguments": [
                              {
                                "id": 11618,
                                "name": "ctx",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 11493,
                                "src": "5347:3:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                }
                              },
                              {
                                "expression": {
                                  "id": 11619,
                                  "name": "appContext",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 11497,
                                  "src": "5352:10:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_struct$_Context_$38872_memory_ptr",
                                    "typeString": "struct ISuperfluid.Context memory"
                                  }
                                },
                                "id": 11620,
                                "isConstant": false,
                                "isLValue": true,
                                "isPure": false,
                                "lValueRequested": false,
                                "memberLocation": "5363:13:46",
                                "memberName": "appCreditUsed",
                                "nodeType": "MemberAccess",
                                "referencedDeclaration": 38866,
                                "src": "5352:24:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_int256",
                                  "typeString": "int256"
                                }
                              }
                            ],
                            "expression": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_bytes_memory_ptr",
                                  "typeString": "bytes memory"
                                },
                                {
                                  "typeIdentifier": "t_int256",
                                  "typeString": "int256"
                                }
                              ],
                              "id": 11617,
                              "name": "_popCallbackStack",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 11761,
                              "src": "5329:17:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_function_internal_nonpayable$_t_bytes_memory_ptr_$_t_int256_$returns$_t_bytes_memory_ptr_$",
                                "typeString": "function (bytes memory,int256) returns (bytes memory)"
                              }
                            },
                            "id": 11621,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "kind": "functionCall",
                            "lValueRequested": false,
                            "nameLocations": [],
                            "names": [],
                            "nodeType": "FunctionCall",
                            "src": "5329:48:46",
                            "tryCall": false,
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes_memory_ptr",
                              "typeString": "bytes memory"
                            }
                          },
                          "src": "5320:57:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bytes_memory_ptr",
                            "typeString": "bytes memory"
                          }
                        },
                        "id": 11623,
                        "nodeType": "ExpressionStatement",
                        "src": "5320:57:46"
                      }
                    ]
                  }
                }
              ]
            },
            "id": 11627,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "callAppAfterCallback",
            "nameLocation": "3598:20:46",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 11494,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11489,
                  "mutability": "mutable",
                  "name": "inputs",
                  "nameLocation": "3650:6:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11627,
                  "src": "3628:28:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                    "typeString": "struct AgreementLibrary.CallbackInputs"
                  },
                  "typeName": {
                    "id": 11488,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 11487,
                      "name": "CallbackInputs",
                      "nameLocations": [
                        "3628:14:46"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 11339,
                      "src": "3628:14:46"
                    },
                    "referencedDeclaration": 11339,
                    "src": "3628:14:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_CallbackInputs_$11339_storage_ptr",
                      "typeString": "struct AgreementLibrary.CallbackInputs"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11491,
                  "mutability": "mutable",
                  "name": "cbdata",
                  "nameLocation": "3679:6:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11627,
                  "src": "3666:19:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 11490,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "3666:5:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11493,
                  "mutability": "mutable",
                  "name": "ctx",
                  "nameLocation": "3720:3:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11627,
                  "src": "3695:28:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 11492,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "3695:5:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "3618:111:46"
            },
            "returnParameters": {
              "id": 11500,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11497,
                  "mutability": "mutable",
                  "name": "appContext",
                  "nameLocation": "3791:10:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11627,
                  "src": "3764:37:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_struct$_Context_$38872_memory_ptr",
                    "typeString": "struct ISuperfluid.Context"
                  },
                  "typeName": {
                    "id": 11496,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 11495,
                      "name": "ISuperfluid.Context",
                      "nameLocations": [
                        "3764:11:46",
                        "3776:7:46"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 38872,
                      "src": "3764:19:46"
                    },
                    "referencedDeclaration": 38872,
                    "src": "3764:19:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_Context_$38872_storage_ptr",
                      "typeString": "struct ISuperfluid.Context"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11499,
                  "mutability": "mutable",
                  "name": "newCtx",
                  "nameLocation": "3816:6:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11627,
                  "src": "3803:19:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 11498,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "3803:5:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "3763:60:46"
            },
            "scope": 11813,
            "src": "3589:1805:46",
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "body": {
              "id": 11647,
              "nodeType": "Block",
              "src": "5839:600:46",
              "statements": [
                {
                  "expression": {
                    "arguments": [
                      {
                        "hexValue": "30",
                        "id": 11638,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": true,
                        "kind": "number",
                        "lValueRequested": false,
                        "nodeType": "Literal",
                        "src": "6080:1:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_rational_0_by_1",
                          "typeString": "int_const 0"
                        },
                        "value": "0"
                      },
                      {
                        "arguments": [
                          {
                            "arguments": [],
                            "expression": {
                              "argumentTypes": [],
                              "expression": {
                                "id": 11640,
                                "name": "appCreditGranted",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 11630,
                                "src": "6340:16:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              },
                              "id": 11641,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "6357:8:46",
                              "memberName": "toInt256",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 7167,
                              "src": "6340:25:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_function_internal_pure$_t_uint256_$returns$_t_int256_$attached_to$_t_uint256_$",
                                "typeString": "function (uint256) pure returns (int256)"
                              }
                            },
                            "id": 11642,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "kind": "functionCall",
                            "lValueRequested": false,
                            "nameLocations": [],
                            "names": [],
                            "nodeType": "FunctionCall",
                            "src": "6340:27:46",
                            "tryCall": false,
                            "typeDescriptions": {
                              "typeIdentifier": "t_int256",
                              "typeString": "int256"
                            }
                          },
                          {
                            "id": 11643,
                            "name": "appCallbackDepositDelta",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 11632,
                            "src": "6385:23:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_int256",
                              "typeString": "int256"
                            }
                          }
                        ],
                        "expression": {
                          "argumentTypes": [
                            {
                              "typeIdentifier": "t_int256",
                              "typeString": "int256"
                            },
                            {
                              "typeIdentifier": "t_int256",
                              "typeString": "int256"
                            }
                          ],
                          "id": 11639,
                          "name": "min",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 11812,
                          "src": "6319:3:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_function_internal_pure$_t_int256_$_t_int256_$returns$_t_int256_$",
                            "typeString": "function (int256,int256) pure returns (int256)"
                          }
                        },
                        "id": 11644,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "kind": "functionCall",
                        "lValueRequested": false,
                        "nameLocations": [],
                        "names": [],
                        "nodeType": "FunctionCall",
                        "src": "6319:103:46",
                        "tryCall": false,
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_rational_0_by_1",
                          "typeString": "int_const 0"
                        },
                        {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      ],
                      "id": 11637,
                      "name": "max",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [
                        11778,
                        11795
                      ],
                      "referencedDeclaration": 11778,
                      "src": "6063:3:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_internal_pure$_t_int256_$_t_int256_$returns$_t_int256_$",
                        "typeString": "function (int256,int256) pure returns (int256)"
                      }
                    },
                    "id": 11645,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "6063:369:46",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "functionReturnParameters": 11636,
                  "id": 11646,
                  "nodeType": "Return",
                  "src": "6056:376:46"
                }
              ]
            },
            "documentation": {
              "id": 11628,
              "nodeType": "StructuredDocumentation",
              "src": "5400:290:46",
              "text": " @dev Determines how much app credit the app will use.\n @param appCreditGranted set prior to callback based on input flow\n @param appCallbackDepositDelta set in callback - sum of deposit deltas of callback agreements and\n current flow owed deposit amount"
            },
            "id": 11648,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "_adjustNewAppCreditUsed",
            "nameLocation": "5704:23:46",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 11633,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11630,
                  "mutability": "mutable",
                  "name": "appCreditGranted",
                  "nameLocation": "5745:16:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11648,
                  "src": "5737:24:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 11629,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "5737:7:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11632,
                  "mutability": "mutable",
                  "name": "appCallbackDepositDelta",
                  "nameLocation": "5778:23:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11648,
                  "src": "5771:30:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 11631,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "5771:6:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "5727:80:46"
            },
            "returnParameters": {
              "id": 11636,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11635,
                  "mutability": "mutable",
                  "name": "",
                  "nameLocation": "-1:-1:-1",
                  "nodeType": "VariableDeclaration",
                  "scope": 11648,
                  "src": "5831:6:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 11634,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "5831:6:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "5830:8:46"
            },
            "scope": 11813,
            "src": "5695:744:46",
            "stateMutability": "pure",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "body": {
              "id": 11710,
              "nodeType": "Block",
              "src": "6551:892:46",
              "statements": [
                {
                  "condition": {
                    "commonType": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    },
                    "id": 11658,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftExpression": {
                      "id": 11655,
                      "name": "noopBit",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11650,
                      "src": "6565:7:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "nodeType": "BinaryOperation",
                    "operator": "==",
                    "rightExpression": {
                      "expression": {
                        "id": 11656,
                        "name": "SuperAppDefinitions",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 37190,
                        "src": "6576:19:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$37190_$",
                          "typeString": "type(library SuperAppDefinitions)"
                        }
                      },
                      "id": 11657,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": true,
                      "lValueRequested": false,
                      "memberLocation": "6596:29:46",
                      "memberName": "BEFORE_AGREEMENT_CREATED_NOOP",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 37098,
                      "src": "6576:49:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "src": "6565:60:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bool",
                      "typeString": "bool"
                    }
                  },
                  "falseBody": {
                    "condition": {
                      "commonType": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "id": 11667,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "leftExpression": {
                        "id": 11664,
                        "name": "noopBit",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11650,
                        "src": "6710:7:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "nodeType": "BinaryOperation",
                      "operator": "==",
                      "rightExpression": {
                        "expression": {
                          "id": 11665,
                          "name": "SuperAppDefinitions",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 37190,
                          "src": "6721:19:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$37190_$",
                            "typeString": "type(library SuperAppDefinitions)"
                          }
                        },
                        "id": 11666,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": true,
                        "lValueRequested": false,
                        "memberLocation": "6741:29:46",
                        "memberName": "BEFORE_AGREEMENT_UPDATED_NOOP",
                        "nodeType": "MemberAccess",
                        "referencedDeclaration": 37114,
                        "src": "6721:49:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "src": "6710:60:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "falseBody": {
                      "condition": {
                        "commonType": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        },
                        "id": 11676,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "leftExpression": {
                          "id": 11673,
                          "name": "noopBit",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 11650,
                          "src": "6855:7:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        },
                        "nodeType": "BinaryOperation",
                        "operator": "==",
                        "rightExpression": {
                          "expression": {
                            "id": 11674,
                            "name": "SuperAppDefinitions",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 37190,
                            "src": "6866:19:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$37190_$",
                              "typeString": "type(library SuperAppDefinitions)"
                            }
                          },
                          "id": 11675,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": true,
                          "lValueRequested": false,
                          "memberLocation": "6886:32:46",
                          "memberName": "BEFORE_AGREEMENT_TERMINATED_NOOP",
                          "nodeType": "MemberAccess",
                          "referencedDeclaration": 37130,
                          "src": "6866:52:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        },
                        "src": "6855:63:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bool",
                          "typeString": "bool"
                        }
                      },
                      "falseBody": {
                        "condition": {
                          "commonType": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          "id": 11685,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "leftExpression": {
                            "id": 11682,
                            "name": "noopBit",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 11650,
                            "src": "7006:7:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "nodeType": "BinaryOperation",
                          "operator": "==",
                          "rightExpression": {
                            "expression": {
                              "id": 11683,
                              "name": "SuperAppDefinitions",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 37190,
                              "src": "7017:19:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$37190_$",
                                "typeString": "type(library SuperAppDefinitions)"
                              }
                            },
                            "id": 11684,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": true,
                            "lValueRequested": false,
                            "memberLocation": "7037:28:46",
                            "memberName": "AFTER_AGREEMENT_CREATED_NOOP",
                            "nodeType": "MemberAccess",
                            "referencedDeclaration": 37106,
                            "src": "7017:48:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            }
                          },
                          "src": "7006:59:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bool",
                            "typeString": "bool"
                          }
                        },
                        "falseBody": {
                          "condition": {
                            "commonType": {
                              "typeIdentifier": "t_uint256",
                              "typeString": "uint256"
                            },
                            "id": 11694,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "leftExpression": {
                              "id": 11691,
                              "name": "noopBit",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 11650,
                              "src": "7149:7:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "nodeType": "BinaryOperation",
                            "operator": "==",
                            "rightExpression": {
                              "expression": {
                                "id": 11692,
                                "name": "SuperAppDefinitions",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 37190,
                                "src": "7160:19:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_type$_t_contract$_SuperAppDefinitions_$37190_$",
                                  "typeString": "type(library SuperAppDefinitions)"
                                }
                              },
                              "id": 11693,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": true,
                              "lValueRequested": false,
                              "memberLocation": "7180:28:46",
                              "memberName": "AFTER_AGREEMENT_UPDATED_NOOP",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 37122,
                              "src": "7160:48:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_uint256",
                                "typeString": "uint256"
                              }
                            },
                            "src": "7149:59:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bool",
                              "typeString": "bool"
                            }
                          },
                          "falseBody": {
                            "id": 11704,
                            "nodeType": "Block",
                            "src": "7362:75:46",
                            "statements": [
                              {
                                "expression": {
                                  "expression": {
                                    "expression": {
                                      "id": 11700,
                                      "name": "ISuperApp",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 37667,
                                      "src": "7383:9:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_type$_t_contract$_ISuperApp_$37667_$",
                                        "typeString": "type(contract ISuperApp)"
                                      }
                                    },
                                    "id": 11701,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": true,
                                    "lValueRequested": false,
                                    "memberLocation": "7393:24:46",
                                    "memberName": "afterAgreementTerminated",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 37666,
                                    "src": "7383:34:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_function_declaration_nonpayable$_t_contract$_ISuperToken_$38201_$_t_address_$_t_bytes32_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$returns$_t_bytes_memory_ptr_$",
                                      "typeString": "function ISuperApp.afterAgreementTerminated(contract ISuperToken,address,bytes32,bytes calldata,bytes calldata,bytes calldata) returns (bytes memory)"
                                    }
                                  },
                                  "id": 11702,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "lValueRequested": false,
                                  "memberLocation": "7418:8:46",
                                  "memberName": "selector",
                                  "nodeType": "MemberAccess",
                                  "src": "7383:43:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes4",
                                    "typeString": "bytes4"
                                  }
                                },
                                "functionReturnParameters": 11654,
                                "id": 11703,
                                "nodeType": "Return",
                                "src": "7376:50:46"
                              }
                            ]
                          },
                          "id": 11705,
                          "nodeType": "IfStatement",
                          "src": "7145:292:46",
                          "trueBody": {
                            "id": 11699,
                            "nodeType": "Block",
                            "src": "7210:72:46",
                            "statements": [
                              {
                                "expression": {
                                  "expression": {
                                    "expression": {
                                      "id": 11695,
                                      "name": "ISuperApp",
                                      "nodeType": "Identifier",
                                      "overloadedDeclarations": [],
                                      "referencedDeclaration": 37667,
                                      "src": "7231:9:46",
                                      "typeDescriptions": {
                                        "typeIdentifier": "t_type$_t_contract$_ISuperApp_$37667_$",
                                        "typeString": "type(contract ISuperApp)"
                                      }
                                    },
                                    "id": 11696,
                                    "isConstant": false,
                                    "isLValue": false,
                                    "isPure": true,
                                    "lValueRequested": false,
                                    "memberLocation": "7241:21:46",
                                    "memberName": "afterAgreementUpdated",
                                    "nodeType": "MemberAccess",
                                    "referencedDeclaration": 37630,
                                    "src": "7231:31:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_function_declaration_nonpayable$_t_contract$_ISuperToken_$38201_$_t_address_$_t_bytes32_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$returns$_t_bytes_memory_ptr_$",
                                      "typeString": "function ISuperApp.afterAgreementUpdated(contract ISuperToken,address,bytes32,bytes calldata,bytes calldata,bytes calldata) returns (bytes memory)"
                                    }
                                  },
                                  "id": 11697,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "lValueRequested": false,
                                  "memberLocation": "7263:8:46",
                                  "memberName": "selector",
                                  "nodeType": "MemberAccess",
                                  "src": "7231:40:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_bytes4",
                                    "typeString": "bytes4"
                                  }
                                },
                                "functionReturnParameters": 11654,
                                "id": 11698,
                                "nodeType": "Return",
                                "src": "7224:47:46"
                              }
                            ]
                          }
                        },
                        "id": 11706,
                        "nodeType": "IfStatement",
                        "src": "7002:435:46",
                        "trueBody": {
                          "id": 11690,
                          "nodeType": "Block",
                          "src": "7067:72:46",
                          "statements": [
                            {
                              "expression": {
                                "expression": {
                                  "expression": {
                                    "id": 11686,
                                    "name": "ISuperApp",
                                    "nodeType": "Identifier",
                                    "overloadedDeclarations": [],
                                    "referencedDeclaration": 37667,
                                    "src": "7088:9:46",
                                    "typeDescriptions": {
                                      "typeIdentifier": "t_type$_t_contract$_ISuperApp_$37667_$",
                                      "typeString": "type(contract ISuperApp)"
                                    }
                                  },
                                  "id": 11687,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "lValueRequested": false,
                                  "memberLocation": "7098:21:46",
                                  "memberName": "afterAgreementCreated",
                                  "nodeType": "MemberAccess",
                                  "referencedDeclaration": 37594,
                                  "src": "7088:31:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_function_declaration_nonpayable$_t_contract$_ISuperToken_$38201_$_t_address_$_t_bytes32_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$returns$_t_bytes_memory_ptr_$",
                                    "typeString": "function ISuperApp.afterAgreementCreated(contract ISuperToken,address,bytes32,bytes calldata,bytes calldata,bytes calldata) returns (bytes memory)"
                                  }
                                },
                                "id": 11688,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": true,
                                "lValueRequested": false,
                                "memberLocation": "7120:8:46",
                                "memberName": "selector",
                                "nodeType": "MemberAccess",
                                "src": "7088:40:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_bytes4",
                                  "typeString": "bytes4"
                                }
                              },
                              "functionReturnParameters": 11654,
                              "id": 11689,
                              "nodeType": "Return",
                              "src": "7081:47:46"
                            }
                          ]
                        }
                      },
                      "id": 11707,
                      "nodeType": "IfStatement",
                      "src": "6851:586:46",
                      "trueBody": {
                        "id": 11681,
                        "nodeType": "Block",
                        "src": "6920:76:46",
                        "statements": [
                          {
                            "expression": {
                              "expression": {
                                "expression": {
                                  "id": 11677,
                                  "name": "ISuperApp",
                                  "nodeType": "Identifier",
                                  "overloadedDeclarations": [],
                                  "referencedDeclaration": 37667,
                                  "src": "6941:9:46",
                                  "typeDescriptions": {
                                    "typeIdentifier": "t_type$_t_contract$_ISuperApp_$37667_$",
                                    "typeString": "type(contract ISuperApp)"
                                  }
                                },
                                "id": 11678,
                                "isConstant": false,
                                "isLValue": false,
                                "isPure": true,
                                "lValueRequested": false,
                                "memberLocation": "6951:25:46",
                                "memberName": "beforeAgreementTerminated",
                                "nodeType": "MemberAccess",
                                "referencedDeclaration": 37647,
                                "src": "6941:35:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_function_declaration_view$_t_contract$_ISuperToken_$38201_$_t_address_$_t_bytes32_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$returns$_t_bytes_memory_ptr_$",
                                  "typeString": "function ISuperApp.beforeAgreementTerminated(contract ISuperToken,address,bytes32,bytes calldata,bytes calldata) view returns (bytes memory)"
                                }
                              },
                              "id": 11679,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": true,
                              "lValueRequested": false,
                              "memberLocation": "6977:8:46",
                              "memberName": "selector",
                              "nodeType": "MemberAccess",
                              "src": "6941:44:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_bytes4",
                                "typeString": "bytes4"
                              }
                            },
                            "functionReturnParameters": 11654,
                            "id": 11680,
                            "nodeType": "Return",
                            "src": "6934:51:46"
                          }
                        ]
                      }
                    },
                    "id": 11708,
                    "nodeType": "IfStatement",
                    "src": "6706:731:46",
                    "trueBody": {
                      "id": 11672,
                      "nodeType": "Block",
                      "src": "6772:73:46",
                      "statements": [
                        {
                          "expression": {
                            "expression": {
                              "expression": {
                                "id": 11668,
                                "name": "ISuperApp",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 37667,
                                "src": "6793:9:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_type$_t_contract$_ISuperApp_$37667_$",
                                  "typeString": "type(contract ISuperApp)"
                                }
                              },
                              "id": 11669,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": true,
                              "lValueRequested": false,
                              "memberLocation": "6803:22:46",
                              "memberName": "beforeAgreementUpdated",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 37611,
                              "src": "6793:32:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_function_declaration_view$_t_contract$_ISuperToken_$38201_$_t_address_$_t_bytes32_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$returns$_t_bytes_memory_ptr_$",
                                "typeString": "function ISuperApp.beforeAgreementUpdated(contract ISuperToken,address,bytes32,bytes calldata,bytes calldata) view returns (bytes memory)"
                              }
                            },
                            "id": 11670,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": true,
                            "lValueRequested": false,
                            "memberLocation": "6826:8:46",
                            "memberName": "selector",
                            "nodeType": "MemberAccess",
                            "src": "6793:41:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_bytes4",
                              "typeString": "bytes4"
                            }
                          },
                          "functionReturnParameters": 11654,
                          "id": 11671,
                          "nodeType": "Return",
                          "src": "6786:48:46"
                        }
                      ]
                    }
                  },
                  "id": 11709,
                  "nodeType": "IfStatement",
                  "src": "6561:876:46",
                  "trueBody": {
                    "id": 11663,
                    "nodeType": "Block",
                    "src": "6627:73:46",
                    "statements": [
                      {
                        "expression": {
                          "expression": {
                            "expression": {
                              "id": 11659,
                              "name": "ISuperApp",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": 37667,
                              "src": "6648:9:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_type$_t_contract$_ISuperApp_$37667_$",
                                "typeString": "type(contract ISuperApp)"
                              }
                            },
                            "id": 11660,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": true,
                            "lValueRequested": false,
                            "memberLocation": "6658:22:46",
                            "memberName": "beforeAgreementCreated",
                            "nodeType": "MemberAccess",
                            "referencedDeclaration": 37575,
                            "src": "6648:32:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_function_declaration_view$_t_contract$_ISuperToken_$38201_$_t_address_$_t_bytes32_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$returns$_t_bytes_memory_ptr_$",
                              "typeString": "function ISuperApp.beforeAgreementCreated(contract ISuperToken,address,bytes32,bytes calldata,bytes calldata) view returns (bytes memory)"
                            }
                          },
                          "id": 11661,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": true,
                          "lValueRequested": false,
                          "memberLocation": "6681:8:46",
                          "memberName": "selector",
                          "nodeType": "MemberAccess",
                          "src": "6648:41:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bytes4",
                            "typeString": "bytes4"
                          }
                        },
                        "functionReturnParameters": 11654,
                        "id": 11662,
                        "nodeType": "Return",
                        "src": "6641:48:46"
                      }
                    ]
                  }
                }
              ]
            },
            "id": 11711,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "_selectorFromNoopBit",
            "nameLocation": "6454:20:46",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 11651,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11650,
                  "mutability": "mutable",
                  "name": "noopBit",
                  "nameLocation": "6483:7:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11711,
                  "src": "6475:15:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 11649,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "6475:7:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "6474:17:46"
            },
            "returnParameters": {
              "id": 11654,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11653,
                  "mutability": "mutable",
                  "name": "selector",
                  "nameLocation": "6537:8:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11711,
                  "src": "6530:15:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes4",
                    "typeString": "bytes4"
                  },
                  "typeName": {
                    "id": 11652,
                    "name": "bytes4",
                    "nodeType": "ElementaryTypeName",
                    "src": "6530:6:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes4",
                      "typeString": "bytes4"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "6529:17:46"
            },
            "scope": 11813,
            "src": "6445:998:46",
            "stateMutability": "pure",
            "virtual": false,
            "visibility": "private"
          },
          {
            "body": {
              "id": 11741,
              "nodeType": "Block",
              "src": "7605:322:46",
              "statements": [
                {
                  "expression": {
                    "id": 11739,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "leftHandSide": {
                      "id": 11721,
                      "name": "appCtx",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11719,
                      "src": "7718:6:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes_memory_ptr",
                        "typeString": "bytes memory"
                      }
                    },
                    "nodeType": "Assignment",
                    "operator": "=",
                    "rightHandSide": {
                      "arguments": [
                        {
                          "id": 11727,
                          "name": "ctx",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 11713,
                          "src": "7780:3:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_bytes_memory_ptr",
                            "typeString": "bytes memory"
                          }
                        },
                        {
                          "arguments": [
                            {
                              "expression": {
                                "id": 11729,
                                "name": "inputs",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": 11716,
                                "src": "7807:6:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                                  "typeString": "struct AgreementLibrary.CallbackInputs memory"
                                }
                              },
                              "id": 11730,
                              "isConstant": false,
                              "isLValue": true,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "7814:7:46",
                              "memberName": "account",
                              "nodeType": "MemberAccess",
                              "referencedDeclaration": 11328,
                              "src": "7807:14:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            ],
                            "id": 11728,
                            "name": "ISuperApp",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 37667,
                            "src": "7797:9:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_ISuperApp_$37667_$",
                              "typeString": "type(contract ISuperApp)"
                            }
                          },
                          "id": 11731,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "7797:25:46",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperApp_$37667",
                            "typeString": "contract ISuperApp"
                          }
                        },
                        {
                          "expression": {
                            "id": 11732,
                            "name": "inputs",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 11716,
                            "src": "7836:6:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                              "typeString": "struct AgreementLibrary.CallbackInputs memory"
                            }
                          },
                          "id": 11733,
                          "isConstant": false,
                          "isLValue": true,
                          "isPure": false,
                          "lValueRequested": false,
                          "memberLocation": "7843:16:46",
                          "memberName": "appCreditGranted",
                          "nodeType": "MemberAccess",
                          "referencedDeclaration": 11334,
                          "src": "7836:23:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          }
                        },
                        {
                          "expression": {
                            "id": 11734,
                            "name": "inputs",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 11716,
                            "src": "7873:6:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                              "typeString": "struct AgreementLibrary.CallbackInputs memory"
                            }
                          },
                          "id": 11735,
                          "isConstant": false,
                          "isLValue": true,
                          "isPure": false,
                          "lValueRequested": false,
                          "memberLocation": "7880:13:46",
                          "memberName": "appCreditUsed",
                          "nodeType": "MemberAccess",
                          "referencedDeclaration": 11336,
                          "src": "7873:20:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_int256",
                            "typeString": "int256"
                          }
                        },
                        {
                          "expression": {
                            "id": 11736,
                            "name": "inputs",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 11716,
                            "src": "7907:6:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                              "typeString": "struct AgreementLibrary.CallbackInputs memory"
                            }
                          },
                          "id": 11737,
                          "isConstant": false,
                          "isLValue": true,
                          "isPure": false,
                          "lValueRequested": false,
                          "memberLocation": "7914:5:46",
                          "memberName": "token",
                          "nodeType": "MemberAccess",
                          "referencedDeclaration": 11326,
                          "src": "7907:12:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                            "typeString": "contract ISuperfluidToken"
                          }
                        }
                      ],
                      "expression": {
                        "argumentTypes": [
                          {
                            "typeIdentifier": "t_bytes_memory_ptr",
                            "typeString": "bytes memory"
                          },
                          {
                            "typeIdentifier": "t_contract$_ISuperApp_$37667",
                            "typeString": "contract ISuperApp"
                          },
                          {
                            "typeIdentifier": "t_uint256",
                            "typeString": "uint256"
                          },
                          {
                            "typeIdentifier": "t_int256",
                            "typeString": "int256"
                          },
                          {
                            "typeIdentifier": "t_contract$_ISuperfluidToken_$39368",
                            "typeString": "contract ISuperfluidToken"
                          }
                        ],
                        "expression": {
                          "arguments": [
                            {
                              "expression": {
                                "id": 11723,
                                "name": "msg",
                                "nodeType": "Identifier",
                                "overloadedDeclarations": [],
                                "referencedDeclaration": -15,
                                "src": "7739:3:46",
                                "typeDescriptions": {
                                  "typeIdentifier": "t_magic_message",
                                  "typeString": "msg"
                                }
                              },
                              "id": 11724,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "memberLocation": "7743:6:46",
                              "memberName": "sender",
                              "nodeType": "MemberAccess",
                              "src": "7739:10:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            }
                          ],
                          "expression": {
                            "argumentTypes": [
                              {
                                "typeIdentifier": "t_address",
                                "typeString": "address"
                              }
                            ],
                            "id": 11722,
                            "name": "ISuperfluid",
                            "nodeType": "Identifier",
                            "overloadedDeclarations": [],
                            "referencedDeclaration": 38940,
                            "src": "7727:11:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$38940_$",
                              "typeString": "type(contract ISuperfluid)"
                            }
                          },
                          "id": 11725,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "kind": "typeConversion",
                          "lValueRequested": false,
                          "nameLocations": [],
                          "names": [],
                          "nodeType": "FunctionCall",
                          "src": "7727:23:46",
                          "tryCall": false,
                          "typeDescriptions": {
                            "typeIdentifier": "t_contract$_ISuperfluid_$38940",
                            "typeString": "contract ISuperfluid"
                          }
                        },
                        "id": 11726,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "lValueRequested": false,
                        "memberLocation": "7751:15:46",
                        "memberName": "appCallbackPush",
                        "nodeType": "MemberAccess",
                        "referencedDeclaration": 38782,
                        "src": "7727:39:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_function_external_nonpayable$_t_bytes_memory_ptr_$_t_contract$_ISuperApp_$37667_$_t_uint256_$_t_int256_$_t_contract$_ISuperfluidToken_$39368_$returns$_t_bytes_memory_ptr_$",
                          "typeString": "function (bytes memory,contract ISuperApp,uint256,int256,contract ISuperfluidToken) external returns (bytes memory)"
                        }
                      },
                      "id": 11738,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "kind": "functionCall",
                      "lValueRequested": false,
                      "nameLocations": [],
                      "names": [],
                      "nodeType": "FunctionCall",
                      "src": "7727:193:46",
                      "tryCall": false,
                      "typeDescriptions": {
                        "typeIdentifier": "t_bytes_memory_ptr",
                        "typeString": "bytes memory"
                      }
                    },
                    "src": "7718:202:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_memory_ptr",
                      "typeString": "bytes memory"
                    }
                  },
                  "id": 11740,
                  "nodeType": "ExpressionStatement",
                  "src": "7718:202:46"
                }
              ]
            },
            "id": 11742,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "_pushCallbackStack",
            "nameLocation": "7458:18:46",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 11717,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11713,
                  "mutability": "mutable",
                  "name": "ctx",
                  "nameLocation": "7499:3:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11742,
                  "src": "7486:16:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 11712,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "7486:5:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11716,
                  "mutability": "mutable",
                  "name": "inputs",
                  "nameLocation": "7534:6:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11742,
                  "src": "7512:28:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_struct$_CallbackInputs_$11339_memory_ptr",
                    "typeString": "struct AgreementLibrary.CallbackInputs"
                  },
                  "typeName": {
                    "id": 11715,
                    "nodeType": "UserDefinedTypeName",
                    "pathNode": {
                      "id": 11714,
                      "name": "CallbackInputs",
                      "nameLocations": [
                        "7512:14:46"
                      ],
                      "nodeType": "IdentifierPath",
                      "referencedDeclaration": 11339,
                      "src": "7512:14:46"
                    },
                    "referencedDeclaration": 11339,
                    "src": "7512:14:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_struct$_CallbackInputs_$11339_storage_ptr",
                      "typeString": "struct AgreementLibrary.CallbackInputs"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "7476:70:46"
            },
            "returnParameters": {
              "id": 11720,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11719,
                  "mutability": "mutable",
                  "name": "appCtx",
                  "nameLocation": "7593:6:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11742,
                  "src": "7580:19:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 11718,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "7580:5:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "7579:21:46"
            },
            "scope": 11813,
            "src": "7449:478:46",
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "private"
          },
          {
            "body": {
              "id": 11760,
              "nodeType": "Block",
              "src": "8085:126:46",
              "statements": [
                {
                  "expression": {
                    "arguments": [
                      {
                        "id": 11756,
                        "name": "ctx",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11744,
                        "src": "8180:3:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_bytes_memory_ptr",
                          "typeString": "bytes memory"
                        }
                      },
                      {
                        "id": 11757,
                        "name": "appCreditUsedDelta",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11746,
                        "src": "8185:18:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      }
                    ],
                    "expression": {
                      "argumentTypes": [
                        {
                          "typeIdentifier": "t_bytes_memory_ptr",
                          "typeString": "bytes memory"
                        },
                        {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      ],
                      "expression": {
                        "arguments": [
                          {
                            "expression": {
                              "id": 11752,
                              "name": "msg",
                              "nodeType": "Identifier",
                              "overloadedDeclarations": [],
                              "referencedDeclaration": -15,
                              "src": "8153:3:46",
                              "typeDescriptions": {
                                "typeIdentifier": "t_magic_message",
                                "typeString": "msg"
                              }
                            },
                            "id": 11753,
                            "isConstant": false,
                            "isLValue": false,
                            "isPure": false,
                            "lValueRequested": false,
                            "memberLocation": "8157:6:46",
                            "memberName": "sender",
                            "nodeType": "MemberAccess",
                            "src": "8153:10:46",
                            "typeDescriptions": {
                              "typeIdentifier": "t_address",
                              "typeString": "address"
                            }
                          }
                        ],
                        "expression": {
                          "argumentTypes": [
                            {
                              "typeIdentifier": "t_address",
                              "typeString": "address"
                            }
                          ],
                          "id": 11751,
                          "name": "ISuperfluid",
                          "nodeType": "Identifier",
                          "overloadedDeclarations": [],
                          "referencedDeclaration": 38940,
                          "src": "8141:11:46",
                          "typeDescriptions": {
                            "typeIdentifier": "t_type$_t_contract$_ISuperfluid_$38940_$",
                            "typeString": "type(contract ISuperfluid)"
                          }
                        },
                        "id": 11754,
                        "isConstant": false,
                        "isLValue": false,
                        "isPure": false,
                        "kind": "typeConversion",
                        "lValueRequested": false,
                        "nameLocations": [],
                        "names": [],
                        "nodeType": "FunctionCall",
                        "src": "8141:23:46",
                        "tryCall": false,
                        "typeDescriptions": {
                          "typeIdentifier": "t_contract$_ISuperfluid_$38940",
                          "typeString": "contract ISuperfluid"
                        }
                      },
                      "id": 11755,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "memberLocation": "8165:14:46",
                      "memberName": "appCallbackPop",
                      "nodeType": "MemberAccess",
                      "referencedDeclaration": 38792,
                      "src": "8141:38:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_function_external_nonpayable$_t_bytes_memory_ptr_$_t_int256_$returns$_t_bytes_memory_ptr_$",
                        "typeString": "function (bytes memory,int256) external returns (bytes memory)"
                      }
                    },
                    "id": 11758,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "kind": "functionCall",
                    "lValueRequested": false,
                    "nameLocations": [],
                    "names": [],
                    "nodeType": "FunctionCall",
                    "src": "8141:63:46",
                    "tryCall": false,
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_memory_ptr",
                      "typeString": "bytes memory"
                    }
                  },
                  "functionReturnParameters": 11750,
                  "id": 11759,
                  "nodeType": "Return",
                  "src": "8134:70:46"
                }
              ]
            },
            "id": 11761,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "_popCallbackStack",
            "nameLocation": "7942:17:46",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 11747,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11744,
                  "mutability": "mutable",
                  "name": "ctx",
                  "nameLocation": "7982:3:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11761,
                  "src": "7969:16:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 11743,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "7969:5:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11746,
                  "mutability": "mutable",
                  "name": "appCreditUsedDelta",
                  "nameLocation": "8002:18:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11761,
                  "src": "7995:25:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 11745,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "7995:6:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "7959:67:46"
            },
            "returnParameters": {
              "id": 11750,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11749,
                  "mutability": "mutable",
                  "name": "newCtx",
                  "nameLocation": "8073:6:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11761,
                  "src": "8060:19:46",
                  "stateVariable": false,
                  "storageLocation": "memory",
                  "typeDescriptions": {
                    "typeIdentifier": "t_bytes_memory_ptr",
                    "typeString": "bytes"
                  },
                  "typeName": {
                    "id": 11748,
                    "name": "bytes",
                    "nodeType": "ElementaryTypeName",
                    "src": "8060:5:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_bytes_storage_ptr",
                      "typeString": "bytes"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8059:21:46"
            },
            "scope": 11813,
            "src": "7933:278:46",
            "stateMutability": "nonpayable",
            "virtual": false,
            "visibility": "private"
          },
          {
            "body": {
              "id": 11777,
              "nodeType": "Block",
              "src": "8454:25:46",
              "statements": [
                {
                  "expression": {
                    "condition": {
                      "commonType": {
                        "typeIdentifier": "t_int256",
                        "typeString": "int256"
                      },
                      "id": 11772,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "leftExpression": {
                        "id": 11770,
                        "name": "a",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11763,
                        "src": "8463:1:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      },
                      "nodeType": "BinaryOperation",
                      "operator": ">",
                      "rightExpression": {
                        "id": 11771,
                        "name": "b",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11765,
                        "src": "8467:1:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      },
                      "src": "8463:5:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "falseExpression": {
                      "id": 11774,
                      "name": "b",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11765,
                      "src": "8475:1:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_int256",
                        "typeString": "int256"
                      }
                    },
                    "id": 11775,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "nodeType": "Conditional",
                    "src": "8463:13:46",
                    "trueExpression": {
                      "id": 11773,
                      "name": "a",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11763,
                      "src": "8471:1:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_int256",
                        "typeString": "int256"
                      }
                    },
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "functionReturnParameters": 11769,
                  "id": 11776,
                  "nodeType": "Return",
                  "src": "8456:20:46"
                }
              ]
            },
            "id": 11778,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "max",
            "nameLocation": "8399:3:46",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 11766,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11763,
                  "mutability": "mutable",
                  "name": "a",
                  "nameLocation": "8410:1:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11778,
                  "src": "8403:8:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 11762,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8403:6:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11765,
                  "mutability": "mutable",
                  "name": "b",
                  "nameLocation": "8420:1:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11778,
                  "src": "8413:8:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 11764,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8413:6:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8402:20:46"
            },
            "returnParameters": {
              "id": 11769,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11768,
                  "mutability": "mutable",
                  "name": "",
                  "nameLocation": "-1:-1:-1",
                  "nodeType": "VariableDeclaration",
                  "scope": 11778,
                  "src": "8446:6:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 11767,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8446:6:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8445:8:46"
            },
            "scope": 11813,
            "src": "8390:89:46",
            "stateMutability": "pure",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "body": {
              "id": 11794,
              "nodeType": "Block",
              "src": "8551:25:46",
              "statements": [
                {
                  "expression": {
                    "condition": {
                      "commonType": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      },
                      "id": 11789,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "leftExpression": {
                        "id": 11787,
                        "name": "a",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11780,
                        "src": "8560:1:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "nodeType": "BinaryOperation",
                      "operator": ">",
                      "rightExpression": {
                        "id": 11788,
                        "name": "b",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11782,
                        "src": "8564:1:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_uint256",
                          "typeString": "uint256"
                        }
                      },
                      "src": "8560:5:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "falseExpression": {
                      "id": 11791,
                      "name": "b",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11782,
                      "src": "8572:1:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "id": 11792,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "nodeType": "Conditional",
                    "src": "8560:13:46",
                    "trueExpression": {
                      "id": 11790,
                      "name": "a",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11780,
                      "src": "8568:1:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_uint256",
                        "typeString": "uint256"
                      }
                    },
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "functionReturnParameters": 11786,
                  "id": 11793,
                  "nodeType": "Return",
                  "src": "8553:20:46"
                }
              ]
            },
            "id": 11795,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "max",
            "nameLocation": "8493:3:46",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 11783,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11780,
                  "mutability": "mutable",
                  "name": "a",
                  "nameLocation": "8505:1:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11795,
                  "src": "8497:9:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 11779,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8497:7:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11782,
                  "mutability": "mutable",
                  "name": "b",
                  "nameLocation": "8516:1:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11795,
                  "src": "8508:9:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 11781,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8508:7:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8496:22:46"
            },
            "returnParameters": {
              "id": 11786,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11785,
                  "mutability": "mutable",
                  "name": "",
                  "nameLocation": "-1:-1:-1",
                  "nodeType": "VariableDeclaration",
                  "scope": 11795,
                  "src": "8542:7:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_uint256",
                    "typeString": "uint256"
                  },
                  "typeName": {
                    "id": 11784,
                    "name": "uint256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8542:7:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_uint256",
                      "typeString": "uint256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8541:9:46"
            },
            "scope": 11813,
            "src": "8484:92:46",
            "stateMutability": "pure",
            "virtual": false,
            "visibility": "internal"
          },
          {
            "body": {
              "id": 11811,
              "nodeType": "Block",
              "src": "8646:25:46",
              "statements": [
                {
                  "expression": {
                    "condition": {
                      "commonType": {
                        "typeIdentifier": "t_int256",
                        "typeString": "int256"
                      },
                      "id": 11806,
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": false,
                      "lValueRequested": false,
                      "leftExpression": {
                        "id": 11804,
                        "name": "a",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11797,
                        "src": "8655:1:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      },
                      "nodeType": "BinaryOperation",
                      "operator": ">",
                      "rightExpression": {
                        "id": 11805,
                        "name": "b",
                        "nodeType": "Identifier",
                        "overloadedDeclarations": [],
                        "referencedDeclaration": 11799,
                        "src": "8659:1:46",
                        "typeDescriptions": {
                          "typeIdentifier": "t_int256",
                          "typeString": "int256"
                        }
                      },
                      "src": "8655:5:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_bool",
                        "typeString": "bool"
                      }
                    },
                    "falseExpression": {
                      "id": 11808,
                      "name": "a",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11797,
                      "src": "8667:1:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_int256",
                        "typeString": "int256"
                      }
                    },
                    "id": 11809,
                    "isConstant": false,
                    "isLValue": false,
                    "isPure": false,
                    "lValueRequested": false,
                    "nodeType": "Conditional",
                    "src": "8655:13:46",
                    "trueExpression": {
                      "id": 11807,
                      "name": "b",
                      "nodeType": "Identifier",
                      "overloadedDeclarations": [],
                      "referencedDeclaration": 11799,
                      "src": "8663:1:46",
                      "typeDescriptions": {
                        "typeIdentifier": "t_int256",
                        "typeString": "int256"
                      }
                    },
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "functionReturnParameters": 11803,
                  "id": 11810,
                  "nodeType": "Return",
                  "src": "8648:20:46"
                }
              ]
            },
            "id": 11812,
            "implemented": true,
            "kind": "function",
            "modifiers": [],
            "name": "min",
            "nameLocation": "8591:3:46",
            "nodeType": "FunctionDefinition",
            "parameters": {
              "id": 11800,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11797,
                  "mutability": "mutable",
                  "name": "a",
                  "nameLocation": "8602:1:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11812,
                  "src": "8595:8:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 11796,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8595:6:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                },
                {
                  "constant": false,
                  "id": 11799,
                  "mutability": "mutable",
                  "name": "b",
                  "nameLocation": "8612:1:46",
                  "nodeType": "VariableDeclaration",
                  "scope": 11812,
                  "src": "8605:8:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 11798,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8605:6:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8594:20:46"
            },
            "returnParameters": {
              "id": 11803,
              "nodeType": "ParameterList",
              "parameters": [
                {
                  "constant": false,
                  "id": 11802,
                  "mutability": "mutable",
                  "name": "",
                  "nameLocation": "-1:-1:-1",
                  "nodeType": "VariableDeclaration",
                  "scope": 11812,
                  "src": "8638:6:46",
                  "stateVariable": false,
                  "storageLocation": "default",
                  "typeDescriptions": {
                    "typeIdentifier": "t_int256",
                    "typeString": "int256"
                  },
                  "typeName": {
                    "id": 11801,
                    "name": "int256",
                    "nodeType": "ElementaryTypeName",
                    "src": "8638:6:46",
                    "typeDescriptions": {
                      "typeIdentifier": "t_int256",
                      "typeString": "int256"
                    }
                  },
                  "visibility": "internal"
                }
              ],
              "src": "8637:8:46"
            },
            "scope": 11813,
            "src": "8582:89:46",
            "stateMutability": "pure",
            "virtual": false,
            "visibility": "internal"
          }
        ],
        "scope": 11814,
        "src": "470:8203:46",
        "usedErrors": [],
        "usedEvents": []
      }
    ],
    "src": "35:8639:46"
  },
  "compiler": {
    "name": "solc",
    "version": "0.8.26+commit.8a97fa7a.Linux.g++"
  },
  "networks": {},
  "schemaVersion": "3.4.16",
  "updatedAt": "2024-08-06T17:02:39.474Z",
  "devdoc": {
    "author": "Superfluid",
    "details": "Helper library for building super agreement",
    "kind": "dev",
    "methods": {},
    "title": "Agreement Library",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  }
}